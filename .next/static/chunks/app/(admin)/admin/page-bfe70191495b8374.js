(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[150],{8064:function(e,t,n){Promise.resolve().then(n.bind(n,4072))},4072:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var a=n(7437),s=n(1863),r=n(6704),i=n(105);r.kL.register(r.uw,r.f$,r.od,r.jn,r.u);var c=e=>{let{data:t,data2:n,timePeriod:r}=e;return(0,a.jsx)("div",{className:"chart-item",children:(0,a.jsx)(i.x1,{data:{labels:t.map(e=>(function(e,t){let n=e.split("."),a=new Date().getFullYear();switch(t){case s.ly:let r=n[1],i=n[0],c=new Date(r,0,1),o=c.getDay(),u=c.getTime()-864e5*(o-1)+6048e5*(i-1),d=new Date(u);d="".concat(d.getDate(),".").concat(d.getMonth()).concat(d.getFullYear()===a?"":".".concat(d.getFullYear()));let h=new Date(u+5184e5);return h="".concat(h.getDate(),".").concat(h.getMonth()).concat(h.getFullYear()===a?"":".".concat(h.getFullYear())),"".concat(d," - ").concat(h);case s.GG:return"".concat(l[Number(n[0])]," ").concat(a==n[1]?"":n[1]);default:return e}})(e._id,r)),datasets:[{id:1,label:"Посещения сайта",data:t.map(e=>e.count),borderColor:"#121e2d",backgroundColor:"#121e2d"},{id:2,label:"Посещения справочника",data:n.map(e=>e.count),borderColor:"#2a81dd",backgroundColor:"#2a81dd"}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Посещяемость сайта"}},aspectRatio:3,scales:{y:{beginAtZero:!0,min:0,ticks:{callback:function(e){if(e%1==0)return e}}}}}})})};let l=["","янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"];var o=n(1358),u=n(73);n(6820);var d=n(9222),h=n(2265),m=()=>{let[e,t]=(0,h.useState)(),[n,r]=(0,h.useState)(null),[i,l]=(0,h.useState)(s.ao),m=async()=>{let{data:e}=await d.Z.get("/api/posts?count=true",{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});t(e)},v=async()=>{let{data:e}=await d.Z.get("/api/about",{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});x(e)},f=async()=>{let{data:e}=await d.Z.get("/api/visits?timeperiod=".concat(i),{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});r(e)};(0,h.useEffect)(()=>{e||(m(),v())},[e]),(0,h.useEffect)(()=>{r("loading"),f()},[i]);let[p,x]=(0,h.useState)(""),j=async e=>{e.preventDefault();let{data:t,status:n}=await d.Z.post("/api/about",{text:p},{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});x(t)};return(0,a.jsxs)("div",{id:"admin",children:[n?(0,a.jsxs)("div",{className:"chart",children:[(0,a.jsxs)("select",{defaultValue:s.ao,onChange:e=>{l(e.target.value)},children:[(0,a.jsx)("option",{value:s.ao,children:"Последняя неделея"}),(0,a.jsx)("option",{value:s.ly,children:"Последний месяц"}),(0,a.jsx)("option",{value:s.GG,children:"Последний год"})]}),n.visitCounts?(0,a.jsx)(c,{data:n.visitCounts,data2:n.phonebookVisits,timePeriod:i}):(0,a.jsx)("div",{className:"loading",children:"LOADING"})]}):(0,a.jsx)(a.Fragment,{}),(0,a.jsxs)("div",{className:"cards",children:[(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"title",children:"Квартиры"}),(0,a.jsx)("div",{className:"number",children:e?e.apartments>0?e.apartments:0:(0,a.jsx)(u.Z,{small:!0})})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"title",children:"Дома"}),(0,a.jsx)("div",{className:"number",children:e?e.houses>0?e.houses:0:(0,a.jsx)(u.Z,{small:!0})})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"title",children:"Коммерческие недвижимости"}),(0,a.jsx)("div",{className:"number",children:e?e.commercials>0?e.commercials:0:(0,a.jsx)(u.Z,{small:!0})})]})]}),(0,a.jsxs)("div",{className:"about-content",children:[(0,a.jsx)("div",{className:"heading",children:"О нас"}),(0,a.jsx)(o.Z,{value:p,handleChange:e=>{x(e)}},"rich1"),(0,a.jsxs)("div",{className:"btns",children:[(0,a.jsx)("div",{className:"btn reset",onClick:e=>{e.preventDefault(),v()},children:"Сбросить изменения"}),(0,a.jsx)("div",{className:"btn save",onClick:j,children:"Сохранить"})]})]})]})}},1358:function(e,t,n){"use strict";var a=n(7437),s=n(2265),r=n(4360),i=n(8864),c=n.n(i);n(5159),n(3888);let l=c()(()=>Promise.all([n.e(335),n.e(354)]).then(n.t.bind(n,6015,23)).then(e=>e.Editor),{loadableGenerated:{webpack:()=>[6015]},ssr:!1});t.Z=e=>{let{value:t=null,handleChange:n}=e,[i,c]=(0,s.useState)(""),[o,u]=s.useState(()=>{r.EditorState.createEmpty()});return(0,s.useEffect)(()=>{t&&!i&&(c(t),function(e){try{return JSON.parse(e)&&!!e}catch(e){return!1}}(t)?u(r.EditorState.createWithContent((0,r.convertFromRaw)(JSON.parse(t)))):u(r.EditorState.createWithContent(r.ContentState.createFromBlockArray((0,r.convertFromHTML)("<p>".concat(t,"</p>"))))))},[t]),(0,a.jsx)("div",{className:"textarea",children:(0,a.jsx)(l,{locale:"ru",editorState:o,onEditorStateChange:e=>{u(e);let t=e.getCurrentContent();n(JSON.stringify((0,r.convertToRaw)(t)))},wrapperClassName:"wrapper-class",toolbarClassName:"toolbar-class",editorClassName:"editor-class",toolbar:{options:["inline","blockType","fontSize","fontFamily","textAlign","link","emoji","remove","history"]}})})}},73:function(e,t,n){"use strict";var a=n(7437);n(3733),t.Z=e=>{let{small:t=!1}=e;return(0,a.jsx)("div",{className:"loading ".concat(t?"small":""),children:(0,a.jsxs)("div",{className:"lds-roller",children:[(0,a.jsx)("div",{}),(0,a.jsx)("div",{}),(0,a.jsx)("div",{}),(0,a.jsx)("div",{}),(0,a.jsx)("div",{}),(0,a.jsx)("div",{}),(0,a.jsx)("div",{}),(0,a.jsx)("div",{})]})})}},1863:function(e,t,n){"use strict";n.d(t,{$5:function(){return v},Dl:function(){return i},GG:function(){return g},Kp:function(){return u},OV:function(){return f},PO:function(){return s},Yf:function(){return c},aU:function(){return p},ao:function(){return x},fe:function(){return o},gU:function(){return a},j$:function(){return m},ky:function(){return d},ly:function(){return j},pd:function(){return r},rS:function(){return l},uJ:function(){return h}});let a=["кирпичный","панельный","монолитный","деревянный","каркасно-камышитовый","пеноблочный","сэндвич-панели","каркасно-щитовой","шлакоблочный","иное"],s=["хорошое","среднее","требует ремонта","свободная планировка","черновая отделка"],r=["полностью","частично","без мебели"],i=["отдельный","блокиратор","есть возможность подключения","нет"],c=["балкон","лоджия","далкон и лоджия","несколько балконов и лоджий"],l=["оптика","проводной","ADSL","через TV кабель"],o=["раздельный","совмещенный","2 с/у и более","нет","во дворе"],u=["свободное назначение","офисы","магазины и бутики","склады","автосервисы и автомойки","общепит","салон красоты"],d=["в бизнец-центре","в жилом доме или ЖК","в торговом центре","на универсальном рынке","отдельностоящее здание"],h=["центральное","на газе","на твердом топливе","на жидком топливе","смешанное","без отопления"],m=["центральная","есть возможность подведения","септик","нет"],v=["есть","есть возможность подключения","нет"],f=["магистральный","автономный","есть возможность подключения","нет"],p=["центральное водоснабжение","есть возможность подключения","скважина","нет"],x="lastWeek",j="lastMonth",g="lastYear"},6820:function(){},5159:function(){},3733:function(){}},function(e){e.O(0,[674,750,123,531,971,596,744],function(){return e(e.s=8064)}),_N_E=e.O()}]);