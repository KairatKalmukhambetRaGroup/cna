(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[150],{8064:function(e,t,a){Promise.resolve().then(a.bind(a,9394))},9394:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var s=a(7437);a(1875);var n=a(9222),r=a(2265),l=a(73),c=a(8758),i=()=>{let[e,t]=(0,r.useState)(null),[a,i]=(0,r.useState)(!1),o=async()=>{let{data:e}=await n.Z.get("/api/applications?archive=".concat(a),{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});t(e)};(0,r.useEffect)(()=>{t(null),o()},[a]);let d=async e=>{let{data:s}=await n.Z.patch("/api/applications",{id:e,archive:a},{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});t(s)};return(0,s.jsxs)("div",{id:"applications",children:[(0,s.jsx)("div",{className:"heading",children:"Заявки"}),(0,s.jsxs)("div",{className:"tab",children:[(0,s.jsxs)("div",{className:"tab-items",children:[(0,s.jsx)("div",{className:"tab-item ".concat(a?"":"active"),onClick:e=>{e.preventDefault(),i(!1)},children:"Новые"}),(0,s.jsx)("div",{className:"tab-item ".concat(a?"active":""),onClick:e=>{e.preventDefault(),i(!0)},children:"Архив"})]}),(0,s.jsxs)("table",{className:"tab-content",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"№"}),(0,s.jsx)("th",{children:"Имя"}),(0,s.jsx)("th",{children:"Телефон"}),(0,s.jsx)("th",{children:"Дата"}),!a&&(0,s.jsx)("th",{children:"Действие"})]})}),(0,s.jsx)("tbody",{children:e?e.length>0?e.map((e,t)=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:Number(t)+1}),(0,s.jsx)("td",{children:e.name}),(0,s.jsx)("td",{children:e.phone}),(0,s.jsx)("td",{children:(0,c.nu)(e.createdAt)}),!a&&(0,s.jsx)("td",{children:(0,s.jsx)("div",{className:"action",onClick:t=>{t.preventDefault(),d(e._id)},children:"Архивировать"})})]},t)):(0,s.jsx)("tr",{children:(0,s.jsx)("td",{className:"center",colSpan:5,children:"Нет заявок"})}):(0,s.jsx)("tr",{children:(0,s.jsx)("td",{className:"center",colSpan:5,children:(0,s.jsx)(l.Z,{small:!0})})})})]})]})]})},o=a(1358);a(6820);var d=()=>{let[e,t]=(0,r.useState)(),a=async()=>{let{data:e}=await n.Z.get("/api/posts?count=true",{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});t(e)},c=async()=>{let{data:e}=await n.Z.get("/api/about",{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});u(e)};(0,r.useEffect)(()=>{e||(a(),c())},[e]);let[d,u]=(0,r.useState)(""),h=async e=>{e.preventDefault();let{data:t,status:a}=await n.Z.post("/api/about",{text:d},{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});u(t)};return(0,s.jsxs)("div",{id:"admin",children:[(0,s.jsxs)("div",{className:"cards",children:[(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("div",{className:"title",children:"Квартиры"}),(0,s.jsx)("div",{className:"number",children:e?e.apartments>0?e.apartments:0:(0,s.jsx)(l.Z,{small:!0})})]}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("div",{className:"title",children:"Дома"}),(0,s.jsx)("div",{className:"number",children:e?e.houses>0?e.houses:0:(0,s.jsx)(l.Z,{small:!0})})]}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("div",{className:"title",children:"Коммерческие недвижимости"}),(0,s.jsx)("div",{className:"number",children:e?e.commercials>0?e.commercials:0:(0,s.jsx)(l.Z,{small:!0})})]})]}),(0,s.jsxs)("div",{className:"about-content",children:[(0,s.jsx)("div",{className:"heading",children:"О нас"}),(0,s.jsx)(o.Z,{value:d,handleChange:e=>{u(e)}},"rich1"),(0,s.jsxs)("div",{className:"btns",children:[(0,s.jsx)("div",{className:"btn reset",onClick:e=>{e.preventDefault(),c()},children:"Сбросить изменения"}),(0,s.jsx)("div",{className:"btn save",onClick:h,children:"Сохранить"})]})]}),(0,s.jsx)(i,{})]})}},1358:function(e,t,a){"use strict";var s=a(7437),n=a(2265),r=a(4360),l=a(8864),c=a.n(l);a(5159),a(3888);let i=c()(()=>Promise.all([a.e(335),a.e(354)]).then(a.t.bind(a,6015,23)).then(e=>e.Editor),{loadableGenerated:{webpack:()=>[6015]},ssr:!1});t.Z=e=>{let{value:t=null,handleChange:a}=e,[l,c]=(0,n.useState)(""),[o,d]=n.useState(()=>{r.EditorState.createEmpty()});return(0,n.useEffect)(()=>{t&&!l&&(c(t),function(e){try{return JSON.parse(e)&&!!e}catch(e){return!1}}(t)?d(r.EditorState.createWithContent((0,r.convertFromRaw)(JSON.parse(t)))):d(r.EditorState.createWithContent(r.ContentState.createFromBlockArray((0,r.convertFromHTML)("<p>".concat(t,"</p>"))))))},[t]),(0,s.jsx)("div",{className:"textarea",children:(0,s.jsx)(i,{locale:"ru",editorState:o,onEditorStateChange:e=>{d(e);let t=e.getCurrentContent();a(JSON.stringify((0,r.convertToRaw)(t)))},wrapperClassName:"wrapper-class",toolbarClassName:"toolbar-class",editorClassName:"editor-class",toolbar:{options:["inline","blockType","fontSize","fontFamily","textAlign","link","emoji","remove","history"]}})})}},73:function(e,t,a){"use strict";var s=a(7437);a(3733),t.Z=e=>{let{small:t=!1}=e;return(0,s.jsx)("div",{className:"loading ".concat(t?"small":""),children:(0,s.jsxs)("div",{className:"lds-roller",children:[(0,s.jsx)("div",{}),(0,s.jsx)("div",{}),(0,s.jsx)("div",{}),(0,s.jsx)("div",{}),(0,s.jsx)("div",{}),(0,s.jsx)("div",{}),(0,s.jsx)("div",{}),(0,s.jsx)("div",{})]})})}},8758:function(e,t,a){"use strict";a.d(t,{ce:function(){return n},eS:function(){return c},i2:function(){return d},nu:function(){return r},pQ:function(){return o},rW:function(){return i},yN:function(){return l}});let s=["янв.","февр.","март","апр.","май","июнь","июль","авг.","сент.","окт.","нояб.","дек."],n=e=>{let t=new Date().getFullYear(),a=new Date(e),n=a.getDate(),r=a.getMonth(),l=a.getFullYear();return l===t?n+" "+s[r]:n+" "+s[r]+" "+l},r=e=>{let t=new Date().getFullYear(),a=new Date(e),n=a.getDate(),r=a.getMonth(),l=a.getFullYear(),c=10>a.getHours()?"0"+a.getHours():a.getHours(),i=10>a.getMinutes()?"0"+a.getMinutes():a.getMinutes();return l===t?n+" "+s[r]+" "+c+":"+i:n+" "+s[r]+" "+l},l=e=>e>1e6?Math.round(e/1e5)/10+" млн.":e,c=e=>{if(e){var t=e.toString().split(".");t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g," "),e=t.join(".")}return e},i=e=>{let t="?";for(let a in e)if(Object.hasOwnProperty.call(e,a)){let s=e[a];s&&a&&("object"==typeof s?Array.isArray(s)?s.forEach(e=>{t.length>1&&(t+="&"),t+=a+"="+e}):(s.from&&(t.length>1&&(t+="&"),t+=a+"_from="+s.from),s.to&&(t.length>1&&(t+="&"),t+=a+"_to="+s.to)):(t.length>1&&(t+="&"),t+=a+"="+s))}return t},o=e=>{let t=decodeURI(e).replace(/\+/g," ").split("&"),a={};return t.forEach(e=>{let t=e.split("=");if(t[0].includes("_")){let e=t[0].split("_");a[e[0]]||(a[e[0]]={}),a[e[0]][e[1]]=t[1]}else if(a[t[0]]){if(!Array.isArray(a[t[0]])){let e=isNaN(a[t[0]])?a[t[0]]:Number(a[t[0]]);a[t[0]]=[],a[t[0]].push(e)}a[t[0]].push(isNaN(t[1])?t[1]:Number(t[1]))}else a[t[0]]=t[1]}),a},d=e=>{let t="";switch(e.housing.slug){case"apartment":t+="".concat(e.rooms,"-комнатная квартира"),e.area&&e.area.total&&(t+=", ".concat(e.area.total," м\xb2")),e.floor&&(t+=", ".concat(e.floor),e.floors&&(t+="/".concat(e.floors)),t+=" этаж");break;case"house":t+="".concat(e.rooms,"-комнатый дом"),e.area&&e.area.total&&(t+=", ".concat(e.area.total," м\xb2")),e.plot&&(t+=", ".concat(e.plot," сот."));break;case"commercial":t+="".concat(e.commercial.purpose),e.area&&e.area.total&&(t+=" - ".concat(e.area.total," м\xb2"))}return"rent"===e.posttype&&(t+=", "+e.rentPeriod.toLowerCase()),t}},6820:function(){},1875:function(){},5159:function(){},3733:function(){}},function(e){e.O(0,[750,123,971,596,744],function(){return e(e.s=8064)}),_N_E=e.O()}]);