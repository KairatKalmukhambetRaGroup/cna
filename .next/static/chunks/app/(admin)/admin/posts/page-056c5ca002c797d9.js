(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[734],{8016:function(e,a,s){Promise.resolve().then(s.bind(s,3744))},3744:function(e,a,s){"use strict";s.r(a);var t=s(7437),n=s(73);s(891),s(1653);var i=s(8758),c=s(9222),l=s(5330),r=s.n(l),o=s(1396),d=s.n(o),u=s(2265);a.default=()=>{let[e,a]=(0,u.useState)(null),[s,l]=(0,u.useState)("apartment"),o=async()=>{let{data:e}=await c.Z.get("/api/posts?housing=".concat(s),{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});a(e)},[m,h]=(0,u.useState)(null);(0,u.useEffect)(()=>{e||o()},[e]);let p=e=>{e.preventDefault();let s=e.currentTarget.dataset.value;l(s),a(null)},v=async e=>{if(e.preventDefault(),m){a(null);let{data:e}=await c.Z.delete("/api/posts/".concat(m,"?housing=").concat(s),{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});h(null),a(e)}};return(0,t.jsxs)("div",{id:"posts",children:[(0,t.jsx)("div",{className:"heading",children:"Объявления"}),m&&(0,t.jsx)("div",{className:"deleteModal",children:(0,t.jsxs)("div",{className:"modal",children:[(0,t.jsx)("div",{className:"h1",children:"Удалить объявление"}),(0,t.jsx)("div",{className:"p",children:"Вы уверены что хотите удалить это объявление?  После удаления его будет невозможно востановить!"}),(0,t.jsxs)("div",{className:"btns",children:[(0,t.jsx)("div",{className:"btn delete",onClick:v,children:"Удалить"}),(0,t.jsx)("div",{className:"btn",onClick:e=>{e.preventDefault(),h(null)},children:"Отмена"})]})]})}),(0,t.jsxs)("div",{className:"tabs",children:[(0,t.jsxs)("div",{className:"tab-nav",children:[(0,t.jsx)("div",{"data-value":"apartment",onClick:p,className:"tab-item ".concat("apartment"===s?"active":""),children:"Квартиры"}),(0,t.jsx)("div",{"data-value":"house",onClick:p,className:"tab-item ".concat("house"===s?"active":""),children:"Дома"}),(0,t.jsx)("div",{"data-value":"commercial",onClick:p,className:"tab-item ".concat("commercial"===s?"active":""),children:"Коммерческая недвижимость"}),(0,t.jsx)(d(),{href:"/admin/posts/new",className:"add-post",children:"Добавить объявление"})]}),(0,t.jsx)("div",{className:"tab-content ".concat("apartment"===s?"btl-0":""),children:e?e.length>0?e.map((e,a)=>(0,t.jsxs)("div",{className:"post",children:[(0,t.jsx)("div",{className:"image",children:e.images&&e.images.length>0&&(0,t.jsx)("img",{loading:"lazy",src:"https://cna.kz/public/uploads/".concat(e.images[0]),alt:""})}),(0,t.jsxs)("div",{className:"info",children:[(0,t.jsxs)("div",{className:"top",children:["apartment"===e.housing.slug&&(0,t.jsxs)("div",{className:"title",children:[e.rooms,"-комнатная квартира",e.area&&e.area.total&&(0,t.jsxs)(t.Fragment,{children:[", ",e.area.total," м",(0,t.jsx)("sup",{children:"2"})]}),e.floor&&", ".concat(e.floor,"/").concat(e.floors," этаж")]}),(0,t.jsxs)("div",{className:"price",children:[(0,i.eS)(e.price)," 〒"]})]}),(0,t.jsxs)("div",{className:"addres",children:[e.region.name,", ",e.adress]}),e.description&&(0,t.jsx)("div",{className:"description",dangerouslySetInnerHTML:{__html:r()(JSON.parse(e.description))}}),(0,t.jsx)("div",{className:"date",children:(0,i.ce)(e.createdAt)})]}),(0,t.jsxs)("div",{className:"actions",children:[(0,t.jsx)(d(),{href:"/admin/posts/".concat(e._id),className:"btn edit",children:"Изменить"}),(0,t.jsx)("div",{className:"btn delete",onClick:a=>{a.preventDefault(),h(e._id)},children:"Удалить"})]})]},a)):(0,t.jsx)("div",{className:"none",children:"NONE"}):(0,t.jsx)(n.Z,{})})]})]})}},73:function(e,a,s){"use strict";var t=s(7437);s(3733),a.Z=e=>{let{small:a=!1}=e;return(0,t.jsx)("div",{className:"loading ".concat(a?"small":""),children:(0,t.jsxs)("div",{className:"lds-roller",children:[(0,t.jsx)("div",{}),(0,t.jsx)("div",{}),(0,t.jsx)("div",{}),(0,t.jsx)("div",{}),(0,t.jsx)("div",{}),(0,t.jsx)("div",{}),(0,t.jsx)("div",{}),(0,t.jsx)("div",{})]})})}},891:function(e,a,s){"use strict";var t=s(7437),n=s(8758),i=s(5330),c=s.n(i),l=s(4033);a.Z=e=>{var a;let{post:s}=e,i=(0,l.useRouter)();return(0,t.jsxs)("div",{className:"postcard",onClick:e=>{e.preventDefault(),i.push("/posts/".concat(s._id))},children:[(0,t.jsx)("div",{className:"postimage",children:s.images&&s.images.length>0?(0,t.jsx)("img",{loading:"lazy",src:"https://cna.kz/public/uploads/".concat(s.images[0]),alt:"preview"}):(0,t.jsx)("img",{loading:"lazy",src:"/noimage.png",alt:"noimage"})}),(0,t.jsxs)("div",{className:"info",children:[(0,t.jsxs)("div",{className:"top",children:[(0,t.jsx)("div",{className:"title",children:(0,n.i2)(s)}),(0,t.jsxs)("div",{className:"price",children:[(0,n.eS)(s.price)," 〒"]})]}),(0,t.jsxs)("div",{className:"addres",children:[s.region.name,", ",s.adress]}),s.description&&(0,t.jsx)("div",{className:"description",dangerouslySetInnerHTML:{__html:c()(null===(a=JSON)||void 0===a?void 0:a.parse(null==s?void 0:s.description))}}),(0,t.jsxs)("div",{className:"date",children:[(0,t.jsx)("span",{children:s.city.name}),(0,n.ce)(s.createdAt)]})]})]})}},8758:function(e,a,s){"use strict";s.d(a,{ce:function(){return n},eS:function(){return c},i2:function(){return o},pQ:function(){return r},rW:function(){return l},yN:function(){return i}});let t=["янв.","февр.","март","апр.","май","июнь","июль","авг.","сент.","окт.","нояб.","дек."],n=e=>{let a=new Date().getFullYear(),s=new Date(e),n=s.getDate(),i=s.getMonth(),c=s.getFullYear();return c===a?n+" "+t[i]:n+" "+t[i]+" "+c},i=e=>e>1e6?Math.round(e/1e5)/10+" млн.":e,c=e=>{if(e){var a=e.toString().split(".");a[0]=a[0].replace(/\B(?=(\d{3})+(?!\d))/g," "),e=a.join(".")}return e},l=e=>{let a="?";for(let s in e)if(Object.hasOwnProperty.call(e,s)){let t=e[s];t&&s&&("object"==typeof t?Array.isArray(t)?t.forEach(e=>{a.length>1&&(a+="&"),a+=s+"="+e}):(t.from&&(a.length>1&&(a+="&"),a+=s+"_from="+t.from),t.to&&(a.length>1&&(a+="&"),a+=s+"_to="+t.to)):(a.length>1&&(a+="&"),a+=s+"="+t))}return a},r=e=>{let a=decodeURI(e).replace(/\+/g," ").split("&"),s={};return a.forEach(e=>{let a=e.split("=");if(a[0].includes("_")){let e=a[0].split("_");s[e[0]]||(s[e[0]]={}),s[e[0]][e[1]]=a[1]}else if(s[a[0]]){if(!Array.isArray(s[a[0]])){let e=isNaN(s[a[0]])?s[a[0]]:Number(s[a[0]]);s[a[0]]=[],s[a[0]].push(e)}s[a[0]].push(isNaN(a[1])?a[1]:Number(a[1]))}else s[a[0]]=a[1]}),s},o=e=>{let a="";switch(e.housing.slug){case"apartment":a+="".concat(e.rooms,"-комнатная квартира"),e.area&&e.area.total&&(a+=", ".concat(e.area.total," м\xb2")),e.floor&&(a+=", ".concat(e.floor),e.floors&&(a+="/".concat(e.floors)),a+=" этаж");break;case"house":a+="".concat(e.rooms,"-комнатый дом"),e.area&&e.area.total&&(a+=", ".concat(e.area.total," м\xb2")),e.plot&&(a+=", ".concat(e.plot," сот."));break;case"commercial":a+="".concat(e.commercial.purpose),e.area&&e.area.total&&(a+=" - ".concat(e.area.total," м\xb2"))}return a}},1653:function(){},3733:function(){},1396:function(e,a,s){e.exports=s(6685)},4033:function(e,a,s){e.exports=s(8165)}},function(e){e.O(0,[750,685,330,971,596,744],function(){return e(e.s=8016)}),_N_E=e.O()}]);