(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[734],{3148:function(e,t,a){Promise.resolve().then(a.bind(a,3744))},3744:function(e,t,a){"use strict";a.r(t);var s=a(7437),n=a(73);a(1653);var l=a(8758),c=a(9222),r=a(5330),i=a.n(r),o=a(1396),d=a.n(o),u=a(2265);t.default=()=>{let[e,t]=(0,u.useState)(null),[a,r]=(0,u.useState)("apartment"),o=async()=>{let{data:e}=await c.Z.get("/api/posts?housing=".concat(a),{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});t(e)},[m,h]=(0,u.useState)(null);(0,u.useEffect)(()=>{e||o()},[e]);let p=e=>{e.preventDefault();let a=e.currentTarget.dataset.value;r(a),t(null)},v=async e=>{if(e.preventDefault(),m){t(null);let{data:e}=await c.Z.delete("/api/posts/".concat(m,"?housing=").concat(a),{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});h(null),t(e)}};return(0,s.jsxs)("div",{id:"posts",children:[(0,s.jsx)("div",{className:"heading",children:"Объявления"}),m&&(0,s.jsx)("div",{className:"deleteModal",children:(0,s.jsxs)("div",{className:"modal",children:[(0,s.jsx)("div",{className:"h1",children:"Удалить объявление"}),(0,s.jsx)("div",{className:"p",children:"Вы уверены что хотите удалить это объявление?  После удаления его будет невозможно востановить!"}),(0,s.jsxs)("div",{className:"btns",children:[(0,s.jsx)("div",{className:"btn delete",onClick:v,children:"Удалить"}),(0,s.jsx)("div",{className:"btn",onClick:e=>{e.preventDefault(),h(null)},children:"Отмена"})]})]})}),(0,s.jsxs)("div",{className:"tabs",children:[(0,s.jsxs)("div",{className:"tab-nav",children:[(0,s.jsx)("div",{"data-value":"apartment",onClick:p,className:"tab-item ".concat("apartment"===a?"active":""),children:"Квартиры"}),(0,s.jsx)("div",{"data-value":"house",onClick:p,className:"tab-item ".concat("house"===a?"active":""),children:"Дома"}),(0,s.jsx)("div",{"data-value":"commercial",onClick:p,className:"tab-item ".concat("commercial"===a?"active":""),children:"Коммерческая недвижимость"}),(0,s.jsx)(d(),{href:"/admin/posts/new",className:"add-post",children:"Добавить объявление"})]}),(0,s.jsx)("div",{className:"tab-content ".concat("apartment"===a?"btl-0":""),children:e?e.length>0?e.map((e,t)=>(0,s.jsxs)("div",{className:"post",children:[(0,s.jsxs)("div",{className:"post-content",children:[(0,s.jsx)("div",{className:"image",children:e.images&&e.images.length>0&&(0,s.jsx)("img",{loading:"lazy",src:"https://cna.kz/uploads/".concat(e.images[0]),alt:""})}),(0,s.jsxs)("div",{className:"info",children:[(0,s.jsxs)("div",{className:"top",children:["apartment"===e.housing.slug&&(0,s.jsxs)("div",{className:"title",children:[e.rooms,"-комнатная квартира",e.area&&e.area.total&&(0,s.jsxs)(s.Fragment,{children:[", ",e.area.total," м",(0,s.jsx)("sup",{children:"2"})]}),e.floor&&", ".concat(e.floor,"/").concat(e.floors," этаж")]}),(0,s.jsxs)("div",{className:"price",children:[(0,l.eS)(e.price)," 〒"]})]}),(0,s.jsxs)("div",{className:"addres",children:[e.region.name,", ",e.adress]}),e.description&&(0,s.jsx)("div",{className:"description",dangerouslySetInnerHTML:{__html:i()(JSON.parse(e.description))}}),(0,s.jsx)("div",{className:"date",children:(0,l.ce)(e.createdAt)})]})]}),(0,s.jsxs)("div",{className:"actions",children:[(0,s.jsx)(d(),{href:"/admin/posts/".concat(e._id),className:"btn edit",children:"Изменить"}),(0,s.jsx)("div",{className:"btn delete",onClick:t=>{t.preventDefault(),h(e._id)},children:"Удалить"})]})]},t)):(0,s.jsx)("div",{className:"none",children:"NONE"}):(0,s.jsx)(n.Z,{})})]})]})}},73:function(e,t,a){"use strict";var s=a(7437);a(3733),t.Z=e=>{let{small:t=!1}=e;return(0,s.jsx)("div",{className:"loading ".concat(t?"small":""),children:(0,s.jsxs)("div",{className:"lds-roller",children:[(0,s.jsx)("div",{}),(0,s.jsx)("div",{}),(0,s.jsx)("div",{}),(0,s.jsx)("div",{}),(0,s.jsx)("div",{}),(0,s.jsx)("div",{}),(0,s.jsx)("div",{}),(0,s.jsx)("div",{})]})})}},8758:function(e,t,a){"use strict";a.d(t,{ce:function(){return n},eS:function(){return r},i2:function(){return d},nu:function(){return l},pQ:function(){return o},rW:function(){return i},yN:function(){return c}});let s=["янв.","февр.","март","апр.","май","июнь","июль","авг.","сент.","окт.","нояб.","дек."],n=e=>{let t=new Date().getFullYear(),a=new Date(e),n=a.getDate(),l=a.getMonth(),c=a.getFullYear();return c===t?n+" "+s[l]:n+" "+s[l]+" "+c},l=e=>{let t=new Date().getFullYear(),a=new Date(e),n=a.getDate(),l=a.getMonth(),c=a.getFullYear(),r=10>a.getHours()?"0"+a.getHours():a.getHours(),i=10>a.getMinutes()?"0"+a.getMinutes():a.getMinutes();return c===t?n+" "+s[l]+" "+r+":"+i:n+" "+s[l]+" "+c},c=e=>e>1e6?Math.round(e/1e5)/10+" млн.":e,r=e=>{if(e){var t=e.toString().split(".");t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g," "),e=t.join(".")}return e},i=e=>{let t="?";for(let a in e)if(Object.hasOwnProperty.call(e,a)){let s=e[a];s&&a&&("object"==typeof s?Array.isArray(s)?s.forEach(e=>{t.length>1&&(t+="&"),t+=a+"="+e}):(s.from&&(t.length>1&&(t+="&"),t+=a+"_from="+s.from),s.to&&(t.length>1&&(t+="&"),t+=a+"_to="+s.to)):(t.length>1&&(t+="&"),t+=a+"="+s))}return t},o=e=>{let t=decodeURI(e).replace(/\+/g," ").split("&"),a={};return t.forEach(e=>{let t=e.split("=");if(t[0].includes("_")){let e=t[0].split("_");a[e[0]]||(a[e[0]]={}),a[e[0]][e[1]]=t[1]}else if(a[t[0]]){if(!Array.isArray(a[t[0]])){let e=isNaN(a[t[0]])?a[t[0]]:Number(a[t[0]]);a[t[0]]=[],a[t[0]].push(e)}a[t[0]].push(isNaN(t[1])?t[1]:Number(t[1]))}else a[t[0]]=t[1]}),a},d=e=>{let t="";switch(e.housing.slug){case"apartment":t+="".concat(e.rooms,"-комнатная квартира"),e.area&&e.area.total&&(t+=", ".concat(e.area.total," м\xb2")),e.floor&&(t+=", ".concat(e.floor),e.floors&&(t+="/".concat(e.floors)),t+=" этаж");break;case"house":t+="".concat(e.rooms,"-комнатый дом"),e.area&&e.area.total&&(t+=", ".concat(e.area.total," м\xb2")),e.plot&&(t+=", ".concat(e.plot," сот."));break;case"commercial":t+="".concat(e.commercial.purpose),e.area&&e.area.total&&(t+=" - ".concat(e.area.total," м\xb2"))}return"rent"===e.posttype&&(t+=", "+e.rentPeriod.toLowerCase()),t}},1653:function(){},3733:function(){},1396:function(e,t,a){e.exports=a(6685)}},function(e){e.O(0,[750,685,330,971,596,744],function(){return e(e.s=3148)}),_N_E=e.O()}]);