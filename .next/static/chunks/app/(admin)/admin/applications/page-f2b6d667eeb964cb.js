(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[539],{5841:function(e,t,n){Promise.resolve().then(n.bind(n,8674))},8674:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(7437);n(1875);var a=n(9222),s=n(2265),c=n(73),l=n(8758),i=()=>{let[e,t]=(0,s.useState)(null),[n,i]=(0,s.useState)(!1),o=async()=>{let{data:e}=await a.Z.get("/api/applications?archive=".concat(n),{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});t(e)};(0,s.useEffect)(()=>{t(null),o()},[n]);let d=async e=>{let{data:r}=await a.Z.patch("/api/applications",{id:e,archive:n},{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});t(r)};return(0,r.jsxs)("div",{id:"applications",children:[(0,r.jsx)("div",{className:"heading",children:"Заявки"}),(0,r.jsxs)("div",{className:"tab",children:[(0,r.jsxs)("div",{className:"tab-items",children:[(0,r.jsx)("div",{className:"tab-item ".concat(n?"":"active"),onClick:e=>{e.preventDefault(),i(!1)},children:"Новые"}),(0,r.jsx)("div",{className:"tab-item ".concat(n?"active":""),onClick:e=>{e.preventDefault(),i(!0)},children:"Архив"})]}),(0,r.jsxs)("table",{className:"tab-content",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"№"}),(0,r.jsx)("th",{children:"Имя"}),(0,r.jsx)("th",{children:"Телефон"}),(0,r.jsx)("th",{children:"Дата"}),!n&&(0,r.jsx)("th",{children:"Действие"})]})}),(0,r.jsx)("tbody",{children:e?e.length>0?e.map((e,t)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:Number(t)+1}),(0,r.jsx)("td",{children:e.name}),(0,r.jsx)("td",{children:e.phone}),(0,r.jsx)("td",{children:(0,l.nu)(e.createdAt)}),!n&&(0,r.jsx)("td",{children:(0,r.jsx)("div",{className:"action",onClick:t=>{t.preventDefault(),d(e._id)},children:"Архивировать"})})]},t)):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{className:"center",colSpan:5,children:"Нет заявок"})}):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{className:"center",colSpan:5,children:(0,r.jsx)(c.Z,{small:!0})})})})]})]})]})},o=()=>(0,r.jsx)(i,{})},73:function(e,t,n){"use strict";var r=n(7437);n(3733),t.Z=e=>{let{small:t=!1}=e;return(0,r.jsx)("div",{className:"loading ".concat(t?"small":""),children:(0,r.jsxs)("div",{className:"lds-roller",children:[(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{})]})})}},8758:function(e,t,n){"use strict";n.d(t,{ce:function(){return a},eS:function(){return l},i2:function(){return d},nu:function(){return s},pQ:function(){return o},rW:function(){return i},yN:function(){return c}});let r=["янв.","февр.","март","апр.","май","июнь","июль","авг.","сент.","окт.","нояб.","дек."],a=e=>{let t=new Date().getFullYear(),n=new Date(e),a=n.getDate(),s=n.getMonth(),c=n.getFullYear();return c===t?a+" "+r[s]:a+" "+r[s]+" "+c},s=e=>{let t=new Date().getFullYear(),n=new Date(e),a=n.getDate(),s=n.getMonth(),c=n.getFullYear(),l=10>n.getHours()?"0"+n.getHours():n.getHours(),i=10>n.getMinutes()?"0"+n.getMinutes():n.getMinutes();return c===t?a+" "+r[s]+" "+l+":"+i:a+" "+r[s]+" "+c},c=e=>e>1e6?Math.round(e/1e5)/10+" млн.":e,l=e=>{if(e){var t=e.toString().split(".");t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g," "),e=t.join(".")}return e},i=e=>{let t="?";for(let n in e)if(Object.hasOwnProperty.call(e,n)){let r=e[n];r&&n&&("object"==typeof r?Array.isArray(r)?r.forEach(e=>{t.length>1&&(t+="&"),t+=n+"="+e}):(r.from&&(t.length>1&&(t+="&"),t+=n+"_from="+r.from),r.to&&(t.length>1&&(t+="&"),t+=n+"_to="+r.to)):(t.length>1&&(t+="&"),t+=n+"="+r))}return t},o=e=>{let t=decodeURI(e).replace(/\+/g," ").split("&"),n={};return t.forEach(e=>{let t=e.split("=");if(t[0].includes("_")){let e=t[0].split("_");n[e[0]]||(n[e[0]]={}),n[e[0]][e[1]]=t[1]}else if(n[t[0]]){if(!Array.isArray(n[t[0]])){let e=isNaN(n[t[0]])?n[t[0]]:Number(n[t[0]]);n[t[0]]=[],n[t[0]].push(e)}n[t[0]].push(isNaN(t[1])?t[1]:Number(t[1]))}else n[t[0]]=t[1]}),n},d=e=>{let t="";switch(e.housing.slug){case"apartment":t+="".concat(e.rooms,"-комнатная квартира"),e.area&&e.area.total&&(t+=", ".concat(e.area.total," м\xb2")),e.floor&&(t+=", ".concat(e.floor),e.floors&&(t+="/".concat(e.floors)),t+=" этаж");break;case"house":t+="".concat(e.rooms,"-комнатый дом"),e.area&&e.area.total&&(t+=", ".concat(e.area.total," м\xb2")),e.plot&&(t+=", ".concat(e.plot," сот."));break;case"commercial":t+="".concat(e.commercial.purpose),e.area&&e.area.total&&(t+=" - ".concat(e.area.total," м\xb2"))}return"rent"===e.posttype&&(t+=", "+e.rentPeriod.toLowerCase()),t}},1875:function(){},3733:function(){}},function(e){e.O(0,[750,971,596,744],function(){return e(e.s=5841)}),_N_E=e.O()}]);