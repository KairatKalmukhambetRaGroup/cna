(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[547],{4797:function(e,s,t){Promise.resolve().then(t.bind(t,5895))},5895:function(e,s,t){"use strict";t.r(s);var a=t(7437);t(3589);var l=t(1344);s.default=()=>(0,a.jsxs)("div",{id:"createAd",children:[(0,a.jsx)("div",{className:"heading",children:"Добавить баннер"}),(0,a.jsx)(l.Z,{})]})},1344:function(e,s,t){"use strict";var a=t(7437);t(3589);var l=t(9222),i=t(2265);let n={name:"",description:"",link:""},c={type:"success",title:"Баннер успешно создан"},r={type:"success",title:"Баннер успешно изменен"},d={type:"fail",title:"Что-то пошло не так",subtitle:"Попробуйте позже или обновите страницу."};s.Z=e=>{let{ad:s=null}=e,[t,m]=(0,i.useState)(n),[o,v]=(0,i.useState)(null),[p,x]=(0,i.useState)(null),[h,j]=(0,i.useState)(null);(0,i.useEffect)(()=>{s&&s._id&&(m({...t,...s}),v("/uploads/".concat(s.image)))},[s]);let f=e=>{let{name:s,value:a}=e.currentTarget;m({...t,[s]:a})},N=async()=>{let e=new FormData;for(let s in t){let a=t[s];e.append(s,a)}if(p&&e.append("image",p),s&&s._id){let{data:a,status:i}=await l.Z.patch("/api/advertisements/".concat(s._id),e,{validateStatus:function(e){return!0},headers:{"Content-Type":"multift/form-data"}});200===i?(m({...t,...a}),j(r)):j(d)}else{let{data:s,status:t}=await l.Z.post("/api/advertisements",e,{validateStatus:function(e){return!0},headers:{"Content-Type":"multipart/form-data"}});200===t?j(c):j(d)}};return(0,a.jsxs)("div",{id:"adForm",children:[(0,a.jsx)(u,{text:h,setText:j}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),N()},children:[(0,a.jsxs)("div",{className:"inputs",children:[(0,a.jsxs)("div",{className:"row",children:[(0,a.jsx)("div",{className:"col",children:(0,a.jsxs)("div",{className:"image-container",children:[(0,a.jsx)("div",{className:"preview",children:o?(0,a.jsx)("img",{src:o,alt:"prev"}):(0,a.jsx)("div",{className:"noimage",children:"Нет изображения"})}),(0,a.jsxs)("div",{className:"btns",children:[(0,a.jsx)("div",{className:"btn clear",onClick:e=>{e.preventDefault(),x(null),v(null)},children:"Удалить изображение"}),(0,a.jsxs)("label",{className:"btn save",children:["Загрузить",(0,a.jsx)("input",{type:"file",name:"images",onChange:e=>{let s=e.target.files[0],t=s.type;["image/jpeg","image/png","image/webp"].includes(t)&&(x(s),v(URL.createObjectURL(s)))}})]})]})]})}),(0,a.jsxs)("div",{className:"col",children:[(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"Название"}),(0,a.jsx)("input",{type:"text",name:"name",required:!0,value:t.name,onChange:f})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"Ссылка"}),(0,a.jsx)("input",{type:"url",name:"link",value:t.link,onChange:f})]})]})]}),(0,a.jsx)("div",{className:"row",children:(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"Описание"}),(0,a.jsx)("textarea",{name:"description",style:{width:"100%"},rows:"10",value:t.description,onChange:f})]})})]}),(0,a.jsxs)("div",{className:"btns",children:[(0,a.jsx)("div",{className:"btn clear",onClick:e=>{e.preventDefault(),s&&s._id?m({...n,...s}):m(n)},children:s&&s._id?"Сбросить изменения":"Очистить"}),(0,a.jsx)("input",{type:"submit",className:"btn save",value:"Сохранить"})]})]})]})};let u=e=>{let{text:s,setText:t}=e;if(s)return(0,a.jsx)("div",{className:"modal",children:(0,a.jsxs)("div",{className:"content ".concat(null==s?void 0:s.type),children:[(0,a.jsx)("i",{}),(0,a.jsxs)("div",{className:"text",children:[(0,a.jsx)("div",{className:"title",children:null==s?void 0:s.title}),s&&s.subtitle&&(0,a.jsx)("div",{className:"subtitle",children:s.subtitle})]}),(0,a.jsx)("div",{className:"btn",onClick:e=>{e.preventDefault(),t(null)},children:"ОК"})]})})}},3589:function(){}},function(e){e.O(0,[750,971,596,744],function(){return e(e.s=4797)}),_N_E=e.O()}]);