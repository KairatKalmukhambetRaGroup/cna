(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[150],{8064:function(t,e,r){Promise.resolve().then(r.bind(r,9394))},9394:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return u}});var n=r(7437);r(1875);var o=r(9222),a=r(2265),i=r(73);r(5423);var s=r(8758),c=()=>{let[t,e]=(0,a.useState)(null),[r,c]=(0,a.useState)(!1),l=async()=>{let{data:t}=await o.Z.get("/api/applications?archive=".concat(r),{validateStatus:function(t){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});e(t)};(0,a.useEffect)(()=>{e(null),l()},[r]);let u=async t=>{let{data:n}=await o.Z.patch("/api/applications",{id:t,archive:r},{validateStatus:function(t){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});e(n)};return(0,n.jsxs)("div",{id:"applications",children:[(0,n.jsx)("div",{className:"heading",children:"Заявки"}),(0,n.jsxs)("div",{className:"tab",children:[(0,n.jsxs)("div",{className:"tab-items",children:[(0,n.jsx)("div",{className:"tab-item ".concat(r?"":"active"),onClick:t=>{t.preventDefault(),c(!1)},children:"Новые"}),(0,n.jsx)("div",{className:"tab-item ".concat(r?"active":""),onClick:t=>{t.preventDefault(),c(!0)},children:"Архив"})]}),(0,n.jsxs)("table",{className:"tab-content",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"№"}),(0,n.jsx)("th",{children:"Имя"}),(0,n.jsx)("th",{children:"Телефон"}),(0,n.jsx)("th",{children:"Дата"}),!r&&(0,n.jsx)("th",{children:"Действие"})]})}),(0,n.jsx)("tbody",{children:t?t.length>0?t.map((t,e)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:Number(e)+1}),(0,n.jsx)("td",{children:t.name}),(0,n.jsx)("td",{children:t.phone}),(0,n.jsx)("td",{children:(0,s.nu)(t.createdAt)}),!r&&(0,n.jsx)("td",{children:(0,n.jsx)("div",{className:"action",onClick:e=>{e.preventDefault(),u(t._id)},children:"Архивировать"})})]},e)):(0,n.jsx)("tr",{children:(0,n.jsx)("td",{className:"center",colSpan:5,children:"Нет заявок"})}):(0,n.jsx)("tr",{children:(0,n.jsx)("td",{className:"center",colSpan:5,children:(0,n.jsx)(i.Z,{small:!0})})})})]})]})]})},l=r(1358);r(6820);var u=()=>{let[t,e]=(0,a.useState)(),r=async()=>{let{data:t}=await o.Z.get("/api/posts?count=true",{validateStatus:function(t){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});e(t)},s=async()=>{let{data:t}=await o.Z.get("/api/about",{validateStatus:function(t){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});h(t)};(0,a.useEffect)(()=>{t||(r(),s())},[t]);let[u,h]=(0,a.useState)(""),d=async t=>{t.preventDefault();let{data:e,status:r}=await o.Z.post("/api/about",{text:u},{validateStatus:function(t){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});h(e)};return(0,n.jsxs)("div",{id:"admin",children:[(0,n.jsxs)("div",{className:"cards",children:[(0,n.jsxs)("div",{className:"card",children:[(0,n.jsx)("div",{className:"title",children:"Квартиры"}),(0,n.jsx)("div",{className:"number",children:t?t.apartments>0?t.apartments:0:(0,n.jsx)(i.Z,{small:!0})})]}),(0,n.jsxs)("div",{className:"card",children:[(0,n.jsx)("div",{className:"title",children:"Дома"}),(0,n.jsx)("div",{className:"number",children:t?t.houses>0?t.houses:0:(0,n.jsx)(i.Z,{small:!0})})]}),(0,n.jsxs)("div",{className:"card",children:[(0,n.jsx)("div",{className:"title",children:"Коммерческие недвижимости"}),(0,n.jsx)("div",{className:"number",children:t?t.commercials>0?t.commercials:0:(0,n.jsx)(i.Z,{small:!0})})]})]}),(0,n.jsxs)("div",{className:"about-content",children:[(0,n.jsx)("div",{className:"heading",children:"О нас"}),(0,n.jsx)(l.Z,{value:u,handleChange:t=>{h(t)}},"rich1"),(0,n.jsxs)("div",{className:"btns",children:[(0,n.jsx)("div",{className:"btn reset",onClick:t=>{t.preventDefault(),s()},children:"Сбросить изменения"}),(0,n.jsx)("div",{className:"btn save",onClick:d,children:"Сохранить"})]})]}),(0,n.jsx)(c,{})]})}},1358:function(t,e,r){"use strict";var n=r(7437),o=r(2265),a=r(4360),i=r(8864),s=r.n(i);r(5159),r(3888);let c=s()(()=>Promise.all([r.e(335),r.e(354)]).then(r.t.bind(r,6015,23)).then(t=>t.Editor),{loadableGenerated:{webpack:()=>[6015]},ssr:!1});e.Z=t=>{let{value:e=null,handleChange:r}=t,[i,s]=(0,o.useState)(""),[l,u]=o.useState(()=>{a.EditorState.createEmpty()});return(0,o.useEffect)(()=>{e&&!i&&(s(e),function(t){try{return JSON.parse(t)&&!!t}catch(t){return!1}}(e)?u(a.EditorState.createWithContent((0,a.convertFromRaw)(JSON.parse(e)))):u(a.EditorState.createWithContent(a.ContentState.createFromBlockArray((0,a.convertFromHTML)("<p>".concat(e,"</p>"))))))},[e]),(0,n.jsx)("div",{className:"textarea",children:(0,n.jsx)(c,{locale:"ru",editorState:l,onEditorStateChange:t=>{u(t);let e=t.getCurrentContent();r(JSON.stringify((0,a.convertToRaw)(e)))},wrapperClassName:"wrapper-class",toolbarClassName:"toolbar-class",editorClassName:"editor-class",toolbar:{options:["inline","blockType","fontSize","fontFamily","textAlign","link","emoji","remove","history"]}})})}},73:function(t,e,r){"use strict";var n=r(7437);r(3733),e.Z=t=>{let{small:e=!1}=t;return(0,n.jsx)("div",{className:"loading ".concat(e?"small":""),children:(0,n.jsxs)("div",{className:"lds-roller",children:[(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{})]})})}},8758:function(t,e,r){"use strict";r.d(e,{ce:function(){return o},eS:function(){return s},i2:function(){return u},nu:function(){return a},pQ:function(){return l},rW:function(){return c},yN:function(){return i}});let n=["янв.","февр.","март","апр.","май","июнь","июль","авг.","сент.","окт.","нояб.","дек."],o=t=>{let e=new Date().getFullYear(),r=new Date(t),o=r.getDate(),a=r.getMonth(),i=r.getFullYear();return i===e?o+" "+n[a]:o+" "+n[a]+" "+i},a=t=>{let e=new Date().getFullYear(),r=new Date(t),o=r.getDate(),a=r.getMonth(),i=r.getFullYear(),s=10>r.getHours()?"0"+r.getHours():r.getHours(),c=10>r.getMinutes()?"0"+r.getMinutes():r.getMinutes();return i===e?o+" "+n[a]+" "+s+":"+c:o+" "+n[a]+" "+i},i=t=>t>1e6?Math.round(t/1e5)/10+" млн.":t,s=t=>{if(t){var e=t.toString().split(".");e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g," "),t=e.join(".")}return t},c=t=>{let e="?";for(let r in t)if(Object.hasOwnProperty.call(t,r)){let n=t[r];n&&r&&("object"==typeof n?Array.isArray(n)?n.forEach(t=>{e.length>1&&(e+="&"),e+=r+"="+t}):(n.from&&(e.length>1&&(e+="&"),e+=r+"_from="+n.from),n.to&&(e.length>1&&(e+="&"),e+=r+"_to="+n.to)):(e.length>1&&(e+="&"),e+=r+"="+n))}return e},l=t=>{let e=decodeURI(t).replace(/\+/g," ").split("&"),r={};return e.forEach(t=>{let e=t.split("=");if(e[0].includes("_")){let t=e[0].split("_");r[t[0]]||(r[t[0]]={}),r[t[0]][t[1]]=e[1]}else if(r[e[0]]){if(!Array.isArray(r[e[0]])){let t=isNaN(r[e[0]])?r[e[0]]:Number(r[e[0]]);r[e[0]]=[],r[e[0]].push(t)}r[e[0]].push(isNaN(e[1])?e[1]:Number(e[1]))}else r[e[0]]=e[1]}),r},u=t=>{let e="";switch(t.housing.slug){case"apartment":e+="".concat(t.rooms,"-комнатная квартира"),t.area&&t.area.total&&(e+=", ".concat(t.area.total," м\xb2")),t.floor&&(e+=", ".concat(t.floor),t.floors&&(e+="/".concat(t.floors)),e+=" этаж");break;case"house":e+="".concat(t.rooms,"-комнатый дом"),t.area&&t.area.total&&(e+=", ".concat(t.area.total," м\xb2")),t.plot&&(e+=", ".concat(t.plot," сот."));break;case"commercial":e+="".concat(t.commercial.purpose),t.area&&t.area.total&&(e+=" - ".concat(t.area.total," м\xb2"))}return"rent"===t.posttype&&(e+=", "+t.rentPeriod.toLowerCase()),e}},6820:function(){},1875:function(){},5159:function(){},3733:function(){},5423:function(t,e,r){var n="object"==typeof r.g?r.g:"object"==typeof window?window:"object"==typeof self?self:this,o=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,a=o&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,t.exports=r(1596),o)n.regeneratorRuntime=a;else try{delete n.regeneratorRuntime}catch(t){n.regeneratorRuntime=void 0}},1596:function(t,e,r){!function(e){"use strict";var r,n=Object.prototype,o=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag",l=e.regeneratorRuntime;if(l){t.exports=l;return}function u(t,e,n,o){var a,i=Object.create((e&&e.prototype instanceof v?e:v).prototype),s=new O(o||[]);return i._invoke=(a=d,function(e,o){if(a===f)throw Error("Generator is already running");if(a===p){if("throw"===e)throw o;return L()}for(s.method=e,s.arg=o;;){var i=s.delegate;if(i){var c=function t(e,n){var o=e.iterator[n.method];if(r===o){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=r,t(e,n),"throw"===n.method))return m;n.method="throw",n.arg=TypeError("The iterator does not provide a 'throw' method")}return m}var a=h(o,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=r),n.delegate=null,m):i:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,m)}(i,s);if(c){if(c===m)continue;return c}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(a===d)throw a=p,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);a=f;var l=h(t,n,s);if("normal"===l.type){if(a=s.done?p:"suspendedYield",l.arg===m)continue;return{value:l.arg,done:s.done}}"throw"===l.type&&(a=p,s.method="throw",s.arg=l.arg)}}),i}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}(l=e.regeneratorRuntime=t.exports).wrap=u;var d="suspendedStart",f="executing",p="completed",m={};function v(){}function g(){}function y(){}var x={};x[i]=function(){return this};var j=Object.getPrototypeOf,w=j&&j(j(S([])));w&&w!==n&&o.call(w,i)&&(x=w);var b=y.prototype=v.prototype=Object.create(x);function N(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function E(t){var r;function n(e,r,a,i){var s=h(t[e],t,r);if("throw"===s.type)i(s.arg);else{var c=s.arg,l=c.value;return l&&"object"==typeof l&&o.call(l,"__await")?Promise.resolve(l.__await).then(function(t){n("next",t,a,i)},function(t){n("throw",t,a,i)}):Promise.resolve(l).then(function(t){c.value=t,a(c)},i)}}"object"==typeof e.process&&e.process.domain&&(n=e.process.domain.bind(n)),this._invoke=function(t,e){function o(){return new Promise(function(r,o){n(t,e,r,o)})}return r=r?r.then(o,o):o()}}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(o.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=r,e.done=!0,e};return a.next=a}}return{next:L}}function L(){return{value:r,done:!0}}g.prototype=b.constructor=y,y.constructor=g,y[c]=g.displayName="GeneratorFunction",l.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},l.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(b),t},l.awrap=function(t){return{__await:t}},N(E.prototype),E.prototype[s]=function(){return this},l.AsyncIterator=E,l.async=function(t,e,r,n){var o=new E(u(t,e,r,n));return l.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},N(b),b[c]="Generator",b[i]=function(){return this},b.toString=function(){return"[object Generator]"},l.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},l.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,o){return s.type="throw",s.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=o.call(i,"catchLoc"),l=o.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else if(l){if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else throw Error("try statement without catch or finally")}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return(i.type=t,i.arg=e,a)?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:S(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),m}}}("object"==typeof r.g?r.g:"object"==typeof window?window:"object"==typeof self?self:this)}},function(t){t.O(0,[750,123,971,596,744],function(){return t(t.s=8064)}),_N_E=t.O()}]);