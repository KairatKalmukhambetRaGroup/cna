(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[848],{3593:function(e,s,t){Promise.resolve().then(t.bind(t,7046))},7046:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return d}});var n=t(7437),i=t(2265),l=e=>{let{formData:s,setFormData:t,clear:i,handleSubmit:l}=e,r=e=>{let{name:n,value:i}=e.currentTarget;if("housings"===n){let{checked:n}=e.currentTarget,{housings:l}=s;n?t({...s,housings:[...l,i]}):t({...s,housings:l.filter(e=>e!==i)})}else t({...s,[n]:i})};return(0,n.jsxs)("form",{id:"regionForm",className:"".concat(s._id?"edit":""),onSubmit:l,children:[(0,n.jsx)("div",{className:"heading",children:s._id?"Изменить Район":"Добавить Район"}),(0,n.jsxs)("div",{className:"inputs",children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Название"}),(0,n.jsx)("input",{type:"text",name:"name",value:s.name,onChange:r})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Короткое название"}),(0,n.jsx)("input",{type:"text",name:"short",value:s.short,onChange:r})]})]}),(0,n.jsxs)("div",{className:"bottom",children:[(0,n.jsx)("div",{className:"btn clear",onClick:i,children:s._id?"Отменить":"Очистить"}),(0,n.jsx)("input",{className:"btn save",type:"submit",value:"".concat(s._id?"Изменить":"Добавить")})]})]})},r=t(73);t(3211);var a=t(9222);let c={name:"",short:""};var d=e=>{let{params:s}=e,{id:t}=s,[d,o]=(0,i.useState)(null),[h,u]=(0,i.useState)(c),[x,j]=(0,i.useState)(null),v=async()=>{let{data:e}=await a.Z.get("/api/cities/".concat(t),{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});o(e.city),j(e.regions)};(0,i.useEffect)(()=>{t&&!d&&v()},[t]);let m=e=>{u(e)},p=async e=>{if(e.preventDefault(),h._id){let{data:e}=await a.Z.patch("/api/regions",{...h,city:t},{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});j(e)}else{let{data:e}=await a.Z.post("/api/regions",{...h,city:t},{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});j(e)}f(e)},f=e=>{e.preventDefault(),u(c)};return(0,n.jsxs)("div",{id:"regions",children:[d&&(0,n.jsxs)("div",{className:"heading",children:["Районы города ",d.name]}),(0,n.jsx)(l,{formData:h,setFormData:u,clear:f,handleSubmit:p}),(0,n.jsx)("div",{className:"regions",children:x?x.length>0?(0,n.jsxs)("table",{children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"№"}),(0,n.jsx)("th",{children:"Название"}),(0,n.jsx)("th",{children:"Короткое название"}),(0,n.jsx)("th",{children:"Действие"})]})}),(0,n.jsx)("tbody",{children:x.map((e,s)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:Number(s)+1}),(0,n.jsx)("td",{children:e.name}),(0,n.jsx)("td",{children:e.short}),(0,n.jsx)("td",{children:(0,n.jsx)("div",{className:"action",onClick:s=>{s.preventDefault(),m(e)},children:"Изменить"})})]},s))})]}):(0,n.jsx)("div",{className:"none",children:"Нет данных"}):(0,n.jsx)(r.Z,{})})]})}},73:function(e,s,t){"use strict";var n=t(7437);t(3733),s.Z=e=>{let{small:s=!1}=e;return(0,n.jsx)("div",{className:"loading ".concat(s?"small":""),children:(0,n.jsxs)("div",{className:"lds-roller",children:[(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{})]})})}},3211:function(){},3733:function(){}},function(e){e.O(0,[750,971,596,744],function(){return e(e.s=3593)}),_N_E=e.O()}]);