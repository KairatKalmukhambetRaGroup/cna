(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[856],{1710:function(e,s,a){Promise.resolve().then(a.bind(a,395))},395:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return x}});var n=a(7437);a(4064);var c=a(9222),t=a(2265),i=a(73);a(1396);var r=a(4033),l=a(1415),o=e=>{let{query:s}=e,[a,r]=(0,t.useState)(null),[o,d]=(0,t.useState)([]),x=async()=>{let{data:e}=await c.Z.get("/api/phonebook?q=".concat(s.q?s.q:"","&category=").concat(s.category?s.category:""),{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});r(e)};(0,t.useEffect)(()=>{m()},[]),(0,t.useEffect)(()=>{x()},[s]);let m=async()=>{let{data:e}=await c.Z.get("/api/phonebook/category",{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});d(e)};return(0,n.jsxs)("div",{id:"phonebook",children:[(0,n.jsx)(l.Z,{}),(0,n.jsx)("div",{className:"container",children:(0,n.jsxs)("div",{className:"wrapper",children:[(0,n.jsx)("div",{className:"heading",children:"Справочник специалистов"}),(0,n.jsxs)("div",{className:"content",children:[(0,n.jsx)(h,{categories:o,query:s}),(0,n.jsx)("div",{className:"contacts",children:a?a.length>0?a.map((e,s)=>(0,n.jsx)(u,{contact:e},s)):(0,n.jsx)("div",{className:"none",children:"По вашему запосу не найдено контактов"}):(0,n.jsx)(i.Z,{})})]})]})})]})};let d={q:"",category:""},h=e=>{let{categories:s,query:a}=e,c=(0,r.useRouter)(),[i,l]=(0,t.useState)(d);(0,t.useEffect)(()=>{l({...i,...a})},[a]);let o=e=>{let{name:s,value:a}=e.currentTarget;l({...i,[s]:a})};return(0,n.jsxs)("form",{id:"phonebookfilter",onSubmit:e=>{e.preventDefault(),c.push("?q=".concat(i.q,"&category=").concat(i.category))},children:[(0,n.jsx)("div",{className:"heading",children:"Фильтр"}),(0,n.jsxs)("div",{className:"inputs",children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Поиск"}),(0,n.jsx)("input",{type:"text",name:"q",onChange:o})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Специализация"}),(0,n.jsxs)("select",{name:"category",onChange:o,value:i.category,children:[(0,n.jsx)("option",{value:"",children:"Неважно"}),s.map((e,s)=>(0,n.jsx)("option",{value:e._id,children:e.name},s))]})]})]}),(0,n.jsxs)("div",{className:"btns",children:[(0,n.jsx)("input",{className:"btn",type:"submit",value:"Искать"}),(0,n.jsx)("div",{className:"btn clear",onClick:()=>{l(d),c.push("?q=&category=")},children:"Сбросить"})]})]})},u=e=>{let{contact:s}=e;return(0,n.jsxs)("div",{className:"card",children:[(0,n.jsxs)("div",{className:"card-body",children:[(0,n.jsx)("div",{className:"name",children:s.name}),(0,n.jsxs)("div",{className:"profession",children:[(0,n.jsx)("i",{}),s.category.name]}),(0,n.jsxs)("div",{className:"address",children:[(0,n.jsx)("i",{})," ",s.address]})]}),(0,n.jsxs)("div",{className:"card-footer",children:[s.phone&&(0,n.jsxs)("a",{href:"tel:".concat(s.phone),className:"phone",children:[(0,n.jsx)("i",{}),s.phone]}),s.telegram&&(0,n.jsx)("a",{href:"".concat(s.telegram),className:"telegram",children:(0,n.jsx)("i",{})}),s.whatsapp&&(0,n.jsx)("a",{href:"".concat(s.whatsapp),className:"whatsapp",children:(0,n.jsx)("i",{})})]})]})};var x=e=>{let{searchParams:s}=e;return(0,n.jsx)(o,{query:s})}},73:function(e,s,a){"use strict";var n=a(7437);a(3733),s.Z=e=>{let{small:s=!1}=e;return(0,n.jsx)("div",{className:"loading ".concat(s?"small":""),children:(0,n.jsxs)("div",{className:"lds-roller",children:[(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{})]})})}},1415:function(e,s,a){"use strict";var n=a(7437),c=a(1396),t=a.n(c);a(3698),s.Z=()=>(0,n.jsx)("div",{id:"menu",children:(0,n.jsxs)("nav",{className:"bottom",children:[(0,n.jsxs)(t(),{href:"/",className:"menu-item",children:[(0,n.jsx)("i",{className:"home"}),"Главная"]}),(0,n.jsxs)(t(),{href:"/posts",className:"menu-item",children:[(0,n.jsx)("i",{className:"post"}),"Купить"]}),(0,n.jsxs)(t(),{href:"/rent",className:"menu-item",children:[(0,n.jsx)("i",{className:"rent"}),"Арендовать"]}),(0,n.jsxs)(t(),{href:"/phonebook",className:"menu-item",children:[(0,n.jsx)("i",{className:"phonebook"}),"Справочник"]})]})})},3733:function(){},3698:function(){},4064:function(){},1396:function(e,s,a){e.exports=a(6685)},4033:function(e,s,a){e.exports=a(8165)}},function(e){e.O(0,[750,685,971,596,744],function(){return e(e.s=1710)}),_N_E=e.O()}]);