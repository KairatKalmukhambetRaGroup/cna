(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[856],{1710:function(e,s,a){Promise.resolve().then(a.bind(a,395))},395:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return u}});var n=a(7437);a(4064);var i=a(9222),t=a(2265),c=a(73),r=a(1415),l=()=>{let[e,s]=(0,t.useState)(null),[a,l]=(0,t.useState)([]),[u,m]=(0,t.useState)(o),[x,j]=(0,t.useState)(null),p=async()=>{let{data:e}=await i.Z.get("/api/phonebook",{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});s(e)};(0,t.useEffect)(()=>{v(),p()},[]);let v=async()=>{let{data:e}=await i.Z.get("/api/phonebook/category",{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});l(e)};return(0,n.jsxs)("div",{id:"phonebook",children:[(0,n.jsx)(r.Z,{}),(0,n.jsx)("div",{className:"container",children:(0,n.jsxs)("div",{className:"wrapper",children:[(0,n.jsx)("div",{className:"heading",children:"Справочник специалистов"}),(0,n.jsxs)("div",{className:"content",children:[(0,n.jsx)(d,{categories:a,formData:u,setFormData:m,setSubcategories:j,subcategories:x}),(0,n.jsx)("div",{className:"contacts",children:e?e.length>0?e.filter(e=>(e.name.toLowerCase().includes(u.q.toLowerCase())||e.description.toLowerCase().includes(u.q.toLowerCase())||e.phone.find(e=>e.toLowerCase().includes(u.q.toLowerCase()))||e.address.toLowerCase().includes(u.q.toLowerCase())||e.category.name.toLowerCase().includes(u.q.toLowerCase()))&&(u.subcategory?e.category._id==u.subcategory:!u.category||x.map(e=>e._id).includes(e.category._id))).map((e,s)=>(0,n.jsx)(h,{contact:e},s)):(0,n.jsx)("div",{className:"none",children:"По вашему запосу не найдено контактов"}):(0,n.jsx)(c.Z,{})})]})]})})]})};let o={q:"",category:"",subcategory:""},d=e=>{let{categories:s,formData:a,setFormData:i,subcategories:t,setSubcategories:c}=e,r=e=>{let{name:n,value:t}=e.currentTarget;"category"==n?(i({...a,[n]:t,subcategory:""}),t?s.forEach(e=>{e._id===t&&c(e.sub)}):c(null)):i({...a,[n]:t})};return(0,n.jsx)("form",{id:"phonebookfilter",onSubmit:e=>{e.preventDefault()},children:(0,n.jsxs)("div",{className:"filter",children:[(0,n.jsx)("div",{className:"heading",children:"Фильтр"}),(0,n.jsxs)("div",{className:"inputs",children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Поиск"}),(0,n.jsx)("input",{type:"text",name:"q",onChange:r,placeholder:"Имя, адрес или номер телефона"})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Раздел"}),(0,n.jsxs)("select",{name:"category",onChange:r,value:a.category,children:[(0,n.jsx)("option",{value:"",children:"Выберите раздел"}),s.map((e,s)=>(0,n.jsx)("option",{value:e._id,children:e.name},s))]})]}),t&&(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Категория"}),(0,n.jsxs)("select",{name:"subcategory",onChange:r,value:a.subcategory,children:[(0,n.jsx)("option",{value:"",children:"Выберите категорию"}),t.map((e,s)=>(0,n.jsx)("option",{value:e._id,children:e.name},s))]})]})]}),(0,n.jsx)("div",{className:"btns",children:(0,n.jsx)("div",{className:"btn clear",onClick:()=>{i(o),c(null)},children:"Сбросить"})})]})})},h=e=>{let{contact:s}=e;return(0,n.jsxs)("div",{className:"card",children:[(0,n.jsxs)("div",{className:"card-body",children:[(0,n.jsx)("div",{className:"name",children:s.name}),(0,n.jsxs)("div",{className:"profession",children:[(0,n.jsx)("i",{}),s.category.name]}),s.address&&(0,n.jsxs)("div",{className:"address",children:[(0,n.jsx)("i",{})," ",s.address]}),s.description&&(0,n.jsx)("div",{className:"description",children:s.description})]}),(0,n.jsxs)("div",{className:"card-footer",children:[(0,n.jsxs)("div",{className:"social",children:[s.telegram&&(0,n.jsx)("a",{href:"https://t.me/".concat(s.telegram),target:"_blank",className:"telegram",children:(0,n.jsx)("i",{})}),s.whatsapp&&(0,n.jsx)("a",{href:"https://wa.me/".concat(s.whatsapp),target:"_blank",className:"whatsapp",children:(0,n.jsx)("i",{})})]}),s.phone.map((e,a)=>(0,n.jsxs)("a",{href:"tel:".concat(s.phone),className:"phone",children:[(0,n.jsx)("i",{}),s.phone[0]]}))]})]})};var u=()=>(0,n.jsx)(l,{})},73:function(e,s,a){"use strict";var n=a(7437);a(3733),s.Z=e=>{let{small:s=!1}=e;return(0,n.jsx)("div",{className:"loading ".concat(s?"small":""),children:(0,n.jsxs)("div",{className:"lds-roller",children:[(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{})]})})}},1415:function(e,s,a){"use strict";var n=a(7437),i=a(1396),t=a.n(i);a(3698),s.Z=()=>(0,n.jsx)("div",{id:"menu",children:(0,n.jsxs)("nav",{className:"bottom",children:[(0,n.jsxs)(t(),{href:"/",className:"menu-item",children:[(0,n.jsx)("i",{className:"home"}),"Главная"]}),(0,n.jsxs)(t(),{href:"/phonebook",className:"menu-item",children:[(0,n.jsx)("i",{className:"phonebook"}),"Справочник"]})]})})},3733:function(){},3698:function(){},4064:function(){}},function(e){e.O(0,[750,396,971,596,744],function(){return e(e.s=1710)}),_N_E=e.O()}]);