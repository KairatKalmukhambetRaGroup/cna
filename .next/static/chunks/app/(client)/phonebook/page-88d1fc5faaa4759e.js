(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[856],{1710:function(e,s,n){Promise.resolve().then(n.bind(n,395))},395:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return j}});var a=n(7437);n(4064);var c=n(9222),t=n(2265),i=n(73),r=n(1396),l=n.n(r),o=n(4033),d=n(1415),u=e=>{let{query:s}=e,[n,r]=(0,t.useState)(null),[l,o]=(0,t.useState)([]),u=async()=>{let{data:e}=await c.Z.get("/api/phonebook?q=".concat(s.q?s.q:"","&category=").concat(s.category?s.category:""),{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});r(e)};(0,t.useEffect)(()=>{h()},[]),(0,t.useEffect)(()=>{u()},[s]);let h=async()=>{let{data:e}=await c.Z.get("/api/phonebook/category",{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});o(e)};return(0,a.jsxs)("div",{id:"phonebook",children:[(0,a.jsx)(d.Z,{}),(0,a.jsx)("div",{className:"container",children:(0,a.jsxs)("div",{className:"wrapper",children:[(0,a.jsx)("div",{className:"heading",children:"Справочник специалистов"}),(0,a.jsxs)("div",{className:"content",children:[(0,a.jsx)(m,{categories:l,query:s}),(0,a.jsx)("div",{className:"contacts",children:n?n.length>0?n.map((e,s)=>(0,a.jsx)(x,{contact:e},s)):(0,a.jsx)("div",{className:"none",children:"none"}):(0,a.jsx)(i.Z,{})})]})]})})]})};let h={q:"",category:""},m=e=>{let{categories:s,query:n}=e,c=(0,o.useRouter)(),[i,r]=(0,t.useState)(h);(0,t.useEffect)(()=>{r({...i,...n})},[n]);let l=e=>{let{name:s,value:n}=e.currentTarget;r({...i,[s]:n})};return(0,a.jsxs)("form",{id:"phonebookfilter",onSubmit:e=>{e.preventDefault(),c.push("?q=".concat(i.q,"&category=").concat(i.category))},children:[(0,a.jsx)("div",{className:"heading",children:"Фильтр"}),(0,a.jsxs)("div",{className:"inputs",children:[(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"Поиск"}),(0,a.jsx)("input",{type:"text",name:"q",onChange:l})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"Специализация"}),(0,a.jsxs)("select",{name:"category",onChange:l,value:i.category,children:[(0,a.jsx)("option",{value:"",children:"Неважно"}),s.map((e,s)=>(0,a.jsx)("option",{value:e._id,children:e.name},s))]})]})]}),(0,a.jsxs)("div",{className:"btns",children:[(0,a.jsx)("input",{className:"btn",type:"submit",value:"Искать"}),(0,a.jsx)("div",{className:"btn clear",onClick:()=>{r(h),c.push("?q=&category=")},children:"Сбросить"})]})]})},x=e=>{let{contact:s}=e;return(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsx)("div",{className:"name",children:s.name}),(0,a.jsx)("div",{className:"profession",children:s.category.name})]}),(0,a.jsx)("div",{className:"card-footer",children:(0,a.jsx)(l(),{href:"/phonebook/".concat(s._id),className:"btn",children:"Подробнее"})})]})};var j=e=>{let{searchParams:s}=e;return(0,a.jsx)(u,{query:s})}},73:function(e,s,n){"use strict";var a=n(7437);n(3733),s.Z=e=>{let{small:s=!1}=e;return(0,a.jsx)("div",{className:"loading ".concat(s?"small":""),children:(0,a.jsxs)("div",{className:"lds-roller",children:[(0,a.jsx)("div",{}),(0,a.jsx)("div",{}),(0,a.jsx)("div",{}),(0,a.jsx)("div",{}),(0,a.jsx)("div",{}),(0,a.jsx)("div",{}),(0,a.jsx)("div",{}),(0,a.jsx)("div",{})]})})}},1415:function(e,s,n){"use strict";var a=n(7437),c=n(1396),t=n.n(c);n(3698),s.Z=()=>(0,a.jsxs)("div",{id:"menu",children:[(0,a.jsxs)("nav",{className:"top",children:[(0,a.jsx)(t(),{href:"/posts",className:"menu-item",children:"Купить"}),(0,a.jsx)(t(),{href:"/rent",className:"menu-item",children:"Арендовать"})]}),(0,a.jsxs)("nav",{className:"bottom",children:[(0,a.jsxs)(t(),{href:"/",className:"menu-item",children:[(0,a.jsx)("i",{className:"home"}),"Главная"]}),(0,a.jsxs)(t(),{href:"/application",target:"_blank",className:"menu-item new",children:[(0,a.jsx)("i",{className:"new"}),"Подать"]}),(0,a.jsxs)(t(),{href:"/phonebook",className:"menu-item",children:[(0,a.jsx)("i",{className:"phonebook"}),"Справочник"]}),(0,a.jsxs)(t(),{href:"/about",className:"menu-item",children:[(0,a.jsx)("i",{className:"about"}),"О нас"]})]})]})},3733:function(){},3698:function(){},4064:function(){},1396:function(e,s,n){e.exports=n(6685)},4033:function(e,s,n){e.exports=n(8165)}},function(e){e.O(0,[750,685,971,596,744],function(){return e(e.s=1710)}),_N_E=e.O()}]);