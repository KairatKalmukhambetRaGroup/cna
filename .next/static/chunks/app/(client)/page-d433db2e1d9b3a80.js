(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[766],{3283:function(e,s,t){Promise.resolve().then(t.bind(t,703))},703:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return w}});var a=t(7437),n=t(2265);t(3556);var i=t(3950),l=t(3428),r=t(5794),c=t(9222);let o={operation:"Купить",housing:"Квартиру",rooms:[],city:"",region:"",price:{from:"",to:""}};var d=e=>{let{handleSubmit:s}=e,[t,d]=n.useState(o),u=(e,s)=>{if(d({...t,[e]:s}),"city"===e&&t.city!==s)for(let e=0;e<x.length;e++){let t=x[e];t.name===s&&h(t.regions.map(e=>e.short))}"housing"===e&&"Коммерческую недвижимость"===s&&d({...t,rooms:[],housing:s})},[m,h]=(0,n.useState)(null),[p,v]=(0,n.useState)(null),[x,j]=(0,n.useState)(null),g=async()=>{let{data:e}=await c.Z.get("/api/cities",{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});j(e),v(e.map(e=>e.name))};return(0,n.useEffect)(()=>{p?(d({...t,city:p[0]}),h(x[0].regions.map(e=>e.short))):g()},[p]),(0,a.jsx)("div",{id:"filter",className:"simple",children:(0,a.jsx)("div",{className:"container",children:(0,a.jsx)("div",{className:"content",children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s(t)},children:[(0,a.jsx)(i.Z,{mobile:!0,name:"operation",options:["Купить","Арендовать"],value:t.operation,handleChange:u}),(0,a.jsx)(i.Z,{mobile:!0,name:"housing",options:["Квартиру","Дом","Коммерческую недвижимость"],value:t.housing,handleChange:u}),(0,a.jsx)(i.Z,{mobile:!0,name:"city",options:p,value:t.city,handleChange:u}),m&&m.length>0&&(0,a.jsx)(i.Z,{name:"region",placeholder:"Не важно",options:m,value:t.region,handleChange:u}),"Коммерческую недвижимость"!==t.housing&&(0,a.jsx)(l.Z,{name:"rooms",label:"- комн.",value:t.rooms,handleChange:u}),(0,a.jsx)(r.Z,{name:"price",label:"Цена",param:"тг",value:t.price,handleChange:u}),(0,a.jsx)("input",{type:"submit",className:"submit-btn",value:"Найти"})]})})})})};t(7652);var u=t(4033),m=t(8758);t(201);var h=t(1415),p=t(7617),v=t(73),x=t(891),j=()=>{let[e,s]=(0,n.useState)(null),[t,i]=(0,n.useState)([]),[l,r]=(0,n.useState)(1),[o,d]=(0,n.useState)(!0),[u,m]=(0,n.useState)(1),h=async()=>{let{data:e}=await c.Z.get("/api/advertisements",{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});s(e)},j=async()=>{d(!0);let{data:e}=await c.Z.get("/api/posts?size=sm&page=".concat(l),{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}}),s=e.posts;m(e.totalPages),i(e=>[...e,...s]),d(!1)};(0,n.useEffect)(()=>{e||h()},[e]),(0,n.useEffect)(()=>{j()},[l]);let g=()=>{window.innerHeight+document.documentElement.scrollTop!==document.documentElement.offsetHeight||o||r(e=>e+1)};return(0,n.useEffect)(()=>(l<u&&window.addEventListener("scroll",g),()=>{window.removeEventListener("scroll",g)}),[o]),(0,a.jsxs)("div",{className:"mobileposts",children:[t.map((s,t)=>(0,a.jsxs)("div",{className:"col",children:[(0,a.jsx)(x.Z,{post:s}),Number(t+1)%5==0&&e&&e.length>0&&(0,a.jsx)(p.Z,{ad:e[(Number(t+1)/5-1)%e.length]})]},t)),o&&(0,a.jsx)(v.Z,{})]})},g=e=>{let{post:s}=e,t=(0,u.useRouter)();return(0,a.jsxs)("div",{className:"postsmall",onClick:e=>{e.preventDefault(),t.push("/posts/".concat(s._id))},children:[(0,a.jsxs)("div",{className:"postimage",children:[s.images&&s.images.length>0?(0,a.jsx)("img",{loading:"lazy",src:"https://cna.kz/public/uploads/".concat(s.images[0]),alt:""}):(0,a.jsx)("img",{loading:"lazy",src:"/noimage.png",alt:"noimage"}),(0,a.jsxs)("div",{className:"price",children:[(0,m.yN)(s.price)," 〒"]})]}),(0,a.jsx)("div",{className:"title",children:(0,m.i2)(s)})]})},f=t(5330),N=t.n(f),b=()=>{var e;let[s,t]=(0,n.useState)(null),[i,l]=(0,n.useState)(null),r=async()=>{let{data:e}=await c.Z.get("/api/posts?size=lg",{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});t(e);let{data:s}=await c.Z.get("/api/about",{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});l(s)};return(0,n.useEffect)(()=>{s||r()},[s]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"smallposts",children:[(0,a.jsxs)("div",{className:"apartments",children:[(0,a.jsx)("div",{className:"medium-24-28 text-black",children:"Квартиры"}),(0,a.jsx)("div",{className:"row",children:s&&s.apartments?s.apartments.map((e,s)=>(0,a.jsx)("div",{className:"col",children:(0,a.jsx)(g,{post:e})},s)):(0,a.jsx)(v.Z,{})})]}),(0,a.jsxs)("div",{className:"houses",children:[(0,a.jsx)("div",{className:"medium-24-28 text-black",children:"Дома"}),(0,a.jsx)("div",{className:"row",children:s&&s.houses?s.houses.map((e,s)=>(0,a.jsx)("div",{className:"col",children:(0,a.jsx)(g,{post:e})},s)):(0,a.jsx)(v.Z,{})})]}),(0,a.jsxs)("div",{className:"commercials",children:[(0,a.jsx)("div",{className:"medium-24-28 text-black",children:"Коммерческие недвижимости"}),(0,a.jsx)("div",{className:"row",children:s&&s.commercials?s.commercials.map((e,s)=>(0,a.jsx)("div",{className:"col",children:(0,a.jsx)(g,{post:e})},s)):(0,a.jsx)(v.Z,{})})]})]}),i&&(0,a.jsxs)("div",{id:"about",children:[(0,a.jsx)("div",{className:"medium-24-28 text-black",children:"О нас"}),(0,a.jsx)("div",{className:"regular-16-20 text-black",dangerouslySetInnerHTML:{__html:N()(null===(e=JSON)||void 0===e?void 0:e.parse(i))}})]})]})},w=()=>{let[e,s]=function(){let[e,s]=(0,n.useState)([0,0]);return(0,n.useLayoutEffect)(()=>{function e(){s([window.innerWidth,window.innerHeight])}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),e}(),[t,i]=(0,n.useState)("sm"),l=(0,u.useRouter)();(0,n.useEffect)(()=>{e&&(e<992?"lg"===t&&i("sm"):"sm"===t&&i("lg"))},[e]);let r=async e=>{let s="";switch(e.housing){case"Дом":s="house";break;case"Коммерческую недвижимость":s="commercial";break;default:s="apartment"}let t=e.operation?e.operation:"Купить",a=(0,m.rW)({...e,housing:s,operation:null});"Купить"===t?l.push("/posts".concat(a)):l.push("/rent".concat(a))};return(0,a.jsxs)("div",{id:"home",children:[(0,a.jsx)(h.Z,{}),(0,a.jsx)(d,{handleSubmit:r}),(0,a.jsxs)("div",{className:"container",children:[(0,a.jsx)("div",{className:"medium-24-28 text-black",children:"Последние предложения недвижимости"}),"lg"===t&&(0,a.jsx)(b,{}),"sm"===t&&(0,a.jsx)(j,{})]})]})}},7617:function(e,s,t){"use strict";var a=t(7437);t(4741),s.Z=e=>{let{ad:s}=e;return(0,a.jsxs)("a",{className:"advertcard",href:s.link,children:[(0,a.jsx)("div",{className:"adimage",children:s.image?(0,a.jsx)("img",{loading:"lazy",src:"https://cna.kz/public/uploads/".concat(s.image),alt:"preview"}):(0,a.jsx)("img",{loading:"lazy",src:"/noimage.png",alt:"noimage"})}),(0,a.jsxs)("div",{className:"info",children:[(0,a.jsx)("div",{className:"title",children:s.name}),s.description&&(0,a.jsx)("div",{className:"description",children:s.description}),(0,a.jsx)("div",{className:"tag",children:"Реклама"})]})]})}},3428:function(e,s,t){"use strict";var a=t(7437);t(5159),t(2265);let n=[1,2,3,4,5];s.Z=e=>{let{name:s="",label:t="",value:i=[],handleChange:l}=e,r=e=>{e.preventDefault();let t=e.currentTarget.dataset.value,a=[];Array.isArray(i)?a=[...i]:a.push(Number(i)),a.includes(Number(t))?a=a.filter(e=>Number(e)!==Number(t)):a.push(Number(t)),l(s,a)};return(0,a.jsxs)("div",{className:"input multinumber",children:[(0,a.jsx)("div",{className:"numbers",children:n.map((e,s)=>(0,a.jsx)("div",{className:"number ".concat(i.includes(Number(e))?"active":""),"data-value":e,onClick:r,children:e},s))}),(0,a.jsx)("label",{children:t})]})}},5794:function(e,s,t){"use strict";var a=t(7437);s.Z=e=>{let{name:s="",label:t="",value:n,param:i,handleChange:l,labeled:r=!1}=e,c=e=>{if(e){var s=e.toString().split(".");s[0]=s[0].replace(/\B(?=(\d{3})+(?!\d))/g," "),e=s.join(".")}return e},o=e=>{e.preventDefault();let t=e.currentTarget.dataset.pref,a=e.currentTarget.value.replace(/\s+/g,""),i="";for(let e=0;e<a.length;e++){let s=a[e];i+=s}l(s,{...n,[t]:i})};return(0,a.jsxs)("div",{className:"input number-range ".concat(r?"labeled":""),children:[t&&(0,a.jsx)("label",{children:t}),(0,a.jsx)("input",{type:"text",name:"".concat(s,"1"),"data-pref":"from",placeholder:"от",value:c(n.from),onChange:o}),(0,a.jsx)("div",{className:"hl"}),(0,a.jsx)("input",{type:"text",name:"".concat(s,"2"),"data-pref":"to",placeholder:"до",value:c(n.to),onChange:o}),i&&(0,a.jsx)("label",{className:"last",children:"м2"===i?(0,a.jsxs)(a.Fragment,{children:["м",(0,a.jsx)("sup",{children:"2"})]}):i})]})}},3950:function(e,s,t){"use strict";var a=t(7437),n=t(2265);t(5159);let i=(e,s)=>{(0,n.useEffect)(()=>{function t(t){e.current&&!e.current.contains(t.target)&&s(!1)}return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[e])};s.Z=e=>{let{mobile:s=!1,name:t="",placeholder:l=null,label:r="",value:c="",options:o=[],handleChange:d,labeled:u=!1}=e,[m,h]=n.useState(!1),p=e=>{e.preventDefault();let s=e.currentTarget.dataset.value;d(t,s),h(!1)},v=(0,n.useRef)(null);return i(v,h),(0,a.jsxs)("div",{className:"input select ".concat(u?"labeled":""," ").concat(s?"mobile":""),children:[r&&(0,a.jsx)("label",{children:r}),(0,a.jsxs)("div",{className:"select",ref:v,children:[(0,a.jsxs)("div",{className:"selected",onClick:e=>{h(!m)},children:[(0,a.jsx)("span",{className:"val",children:c||l}),(0,a.jsx)("i",{})]}),(0,a.jsxs)("div",{className:"options ".concat(m?"active":""),children:[l&&(0,a.jsx)("div",{className:"option ".concat(""===c?"active":""),"data-value":null,onClick:p,children:l}),o&&o.length>0&&o.map((e,s)=>(0,a.jsx)("div",{className:"option ".concat(e===c?"active":""),"data-value":e,onClick:p,children:e},s))]})]})]})}},73:function(e,s,t){"use strict";var a=t(7437);t(3733),s.Z=e=>{let{small:s=!1}=e;return(0,a.jsx)("div",{className:"loading ".concat(s?"small":""),children:(0,a.jsxs)("div",{className:"lds-roller",children:[(0,a.jsx)("div",{}),(0,a.jsx)("div",{}),(0,a.jsx)("div",{}),(0,a.jsx)("div",{}),(0,a.jsx)("div",{}),(0,a.jsx)("div",{}),(0,a.jsx)("div",{}),(0,a.jsx)("div",{})]})})}},1415:function(e,s,t){"use strict";var a=t(7437),n=t(1396),i=t.n(n);t(3698),s.Z=()=>(0,a.jsxs)("div",{id:"menu",children:[(0,a.jsxs)("nav",{className:"top",children:[(0,a.jsx)(i(),{href:"/posts",className:"menu-item",children:"Купить"}),(0,a.jsx)(i(),{href:"/rent",className:"menu-item",children:"Арендовать"})]}),(0,a.jsxs)("nav",{className:"bottom",children:[(0,a.jsxs)(i(),{href:"/",className:"menu-item",children:[(0,a.jsx)("i",{className:"home"}),"Главная"]}),(0,a.jsxs)("a",{href:"tel:+77055621546",className:"menu-item new",children:[(0,a.jsx)("i",{className:"new"}),"Подать"]}),(0,a.jsxs)(i(),{href:"/about",className:"menu-item",children:[(0,a.jsx)("i",{className:"about"}),"О нас"]})]})]})},891:function(e,s,t){"use strict";var a=t(7437),n=t(8758),i=t(5330),l=t.n(i),r=t(4033);s.Z=e=>{var s;let{post:t}=e,i=(0,r.useRouter)();return(0,a.jsxs)("div",{className:"postcard",onClick:e=>{e.preventDefault(),i.push("/posts/".concat(t._id))},children:[(0,a.jsx)("div",{className:"postimage",children:t.images&&t.images.length>0?(0,a.jsx)("img",{loading:"lazy",src:"https://cna.kz/public/uploads/".concat(t.images[0]),alt:"preview"}):(0,a.jsx)("img",{loading:"lazy",src:"/noimage.png",alt:"noimage"})}),(0,a.jsxs)("div",{className:"info",children:[(0,a.jsxs)("div",{className:"top",children:[(0,a.jsx)("div",{className:"title",children:(0,n.i2)(t)}),(0,a.jsxs)("div",{className:"price",children:[(0,n.eS)(t.price)," 〒"]})]}),(0,a.jsxs)("div",{className:"addres",children:[t.region.name,", ",t.adress]}),t.description&&(0,a.jsx)("div",{className:"description",dangerouslySetInnerHTML:{__html:l()(null===(s=JSON)||void 0===s?void 0:s.parse(null==t?void 0:t.description))}}),(0,a.jsxs)("div",{className:"date",children:[(0,a.jsx)("span",{children:t.city.name}),(0,n.ce)(t.createdAt)]})]})]})}},8758:function(e,s,t){"use strict";t.d(s,{ce:function(){return n},eS:function(){return l},i2:function(){return o},pQ:function(){return c},rW:function(){return r},yN:function(){return i}});let a=["янв.","февр.","март","апр.","май","июнь","июль","авг.","сент.","окт.","нояб.","дек."],n=e=>{let s=new Date().getFullYear(),t=new Date(e),n=t.getDate(),i=t.getMonth(),l=t.getFullYear();return l===s?n+" "+a[i]:n+" "+a[i]+" "+l},i=e=>e>1e6?Math.round(e/1e5)/10+" млн.":e,l=e=>{if(e){var s=e.toString().split(".");s[0]=s[0].replace(/\B(?=(\d{3})+(?!\d))/g," "),e=s.join(".")}return e},r=e=>{let s="?";for(let t in e)if(Object.hasOwnProperty.call(e,t)){let a=e[t];a&&t&&("object"==typeof a?Array.isArray(a)?a.forEach(e=>{s.length>1&&(s+="&"),s+=t+"="+e}):(a.from&&(s.length>1&&(s+="&"),s+=t+"_from="+a.from),a.to&&(s.length>1&&(s+="&"),s+=t+"_to="+a.to)):(s.length>1&&(s+="&"),s+=t+"="+a))}return s},c=e=>{let s=decodeURI(e).replace(/\+/g," ").split("&"),t={};return s.forEach(e=>{let s=e.split("=");if(s[0].includes("_")){let e=s[0].split("_");t[e[0]]||(t[e[0]]={}),t[e[0]][e[1]]=s[1]}else if(t[s[0]]){if(!Array.isArray(t[s[0]])){let e=isNaN(t[s[0]])?t[s[0]]:Number(t[s[0]]);t[s[0]]=[],t[s[0]].push(e)}t[s[0]].push(isNaN(s[1])?s[1]:Number(s[1]))}else t[s[0]]=s[1]}),t},o=e=>{let s="";switch(e.housing.slug){case"apartment":s+="".concat(e.rooms,"-комнатная квартира"),e.area&&e.area.total&&(s+=", ".concat(e.area.total," м\xb2")),e.floor&&(s+=", ".concat(e.floor),e.floors&&(s+="/".concat(e.floors)),s+=" этаж");break;case"house":s+="".concat(e.rooms,"-комнатый дом"),e.area&&e.area.total&&(s+=", ".concat(e.area.total," м\xb2")),e.plot&&(s+=", ".concat(e.plot," сот."));break;case"commercial":s+="".concat(e.commercial.purpose),e.area&&e.area.total&&(s+=" - ".concat(e.area.total," м\xb2"))}return"rent"===e.posttype&&(s+=", "+e.rentPeriod.toLowerCase()),s}},4741:function(){},3556:function(){},7652:function(){},5159:function(){},3733:function(){},3698:function(){},201:function(){},1396:function(e,s,t){e.exports=t(6685)},4033:function(e,s,t){e.exports=t(8165)}},function(e){e.O(0,[750,685,330,530,971,596,744],function(){return e(e.s=3283)}),_N_E=e.O()}]);