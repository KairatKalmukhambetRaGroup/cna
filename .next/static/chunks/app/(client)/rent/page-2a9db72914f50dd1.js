(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[225],{7524:function(e,t,s){Promise.resolve().then(s.bind(s,3391))},3391:function(e,t,s){"use strict";s.r(t);var o=s(7437);s(7503);var n=s(1415),a=s(7358),r=s(1206),i=s(8758);s(7652);var l=s(9222),c=s(4033),u=s(2265),f=s(5369);let h={housing:"apartments",rooms:[],purpose:[],placement:[],city:"",region:"",price:{from:"",to:""},material:[],year:{from:"",to:""},floor:{from:"",to:""},floors:{from:"",to:""},plot:{from:"",to:""},heating:[],sewerage:[],bathroom:[],total_area:{from:"",to:""},kitchen_area:{from:"",to:""},living_area:{from:"",to:""},sort:"new"};t.default=()=>{let e=(0,c.useRouter)(),t=(0,c.useSearchParams)(),[s,m]=(0,u.useState)(h),[d,p]=(0,u.useState)(),[g,w]=(0,u.useState)(),[S,v]=(0,u.useState)(null),[E,y]=(0,u.useState)(1),[A,C]=(0,u.useState)(1),[_,x]=(0,u.useState)(!0),[b,j]=(0,u.useState)(0),[N,O]=(0,u.useState)(""),W=(t,o)=>{if(m({...s,[t]:o}),"city"===t&&s.city!==o){o||p([]);for(let e=0;e<S.length;e++){let t=S[e];t.name===o&&p(t.regions.map(e=>e.short))}}if("housing"===t){m({...h,[t]:o});let s=(0,i.rW)({[t]:o});e.push("".concat(s)),H(s)}else if("sort"===t){let n=(0,i.rW)({...s,[t]:o});e.push("".concat(n)),H(n)}},[Z,k]=(0,u.useState)([]),H=async()=>{x(!0);let{data:e}=await l.Z.get("/api/posts/rent".concat(N.includes("?")?N:"?"+N),{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}}),t=e.posts;y(e.totalPages),j(e.count),Number(e.currentPage)===Number(1)?k(t):k(e=>[...e,...t]),x(!1)},P=async()=>{let{data:e}=await l.Z.get("/api/cities",{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});v(e),w(e.map(e=>e.name))};(0,u.useEffect)(()=>{H()},[A]),(0,u.useEffect)(()=>{k([]),x(!0),C(1),H()},[N]);let D=()=>{window.innerHeight+document.documentElement.scrollTop!==document.documentElement.offsetHeight||_||C(e=>e+1)};return(0,u.useEffect)(()=>(A<E&&window.addEventListener("scroll",D),()=>{window.removeEventListener("scroll",D)}),[_]),(0,u.useEffect)(()=>{if(g){if(s.city)for(let e=0;e<S.length;e++){let t=S[e];t.name===s.city&&p(t.regions.map(e=>e.short))}}else P()},[g]),(0,u.useEffect)(()=>{let o=t.toString(),n=(0,i.pQ)(o);if(n.housing)m({...s,...n}),O(o);else{n.housing="apartment";let t=(0,i.rW)(n);e.push("".concat(t))}},[t]),(0,o.jsxs)("div",{id:"allposts",children:[(0,o.jsx)(n.Z,{}),(0,o.jsx)(f.Z,{prefix:"Аренда",housing:s.housing,cities:g,regions:d,formData:s,handleChange:W,handleSubmit:t=>{t.preventDefault();let o=(0,i.rW)(s);e.push("".concat(o))}}),(0,o.jsx)("div",{className:"container",children:(0,o.jsxs)("div",{className:"content",children:[(0,o.jsx)(a.Z,{posts:Z,loading:_,title:s.housing,formData:s,handleChange:W,total:b}),(0,o.jsx)(r.Z,{})]})})]})}}},function(e){e.O(0,[750,685,330,482,904,971,596,744],function(){return e(e.s=7524)}),_N_E=e.O()}]);