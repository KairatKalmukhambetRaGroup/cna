(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[766],{3283:function(e,s,t){Promise.resolve().then(t.bind(t,1589))},1589:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return b}});var a=t(7437),n=t(2265);t(3556),t(2003);var i=t(3950),l=t(3428),r=t(5794),c=t(9222);let o={operation:"Купить",housing:"Квартиру",rooms:[],city:"",region:"",price:{from:"",to:""}};var u=e=>{let{handleSubmit:s}=e,[t,u]=n.useState(o),d=(e,s)=>{if(u({...t,[e]:s}),"city"===e&&t.city!==s)for(let e=0;e<v.length;e++){let t=v[e];t.name===s&&h(t.regions.map(e=>e.short))}"housing"===e&&"Коммерческую недвижимость"===s&&u({...t,rooms:[],housing:s})},[m,h]=(0,n.useState)(null),[p,g]=(0,n.useState)(null),[v,x]=(0,n.useState)(null),j=async()=>{let{data:e}=await c.Z.get("/api/cities",{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});x(e),g(e.map(e=>e.name))};return(0,n.useEffect)(()=>{p?(u({...t,city:p[0]}),h(v[0].regions.map(e=>e.short))):j()},[p]),(0,a.jsx)("div",{id:"filter",className:"simple",children:(0,a.jsx)("div",{className:"container",children:(0,a.jsx)("div",{className:"content",children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s(t)},children:[(0,a.jsx)(i.Z,{mobile:!0,name:"operation",options:["Купить","Арендовать"],value:t.operation,handleChange:d}),(0,a.jsx)(i.Z,{mobile:!0,name:"housing",options:["Квартиру","Дом","Коммерческую недвижимость"],value:t.housing,handleChange:d}),(0,a.jsx)(i.Z,{mobile:!0,name:"city",options:p,value:t.city,handleChange:d}),m&&m.length>0&&(0,a.jsx)(i.Z,{name:"region",placeholder:"Не важно",options:m,value:t.region,handleChange:d}),"Коммерческую недвижимость"!==t.housing&&(0,a.jsx)(l.Z,{name:"rooms",label:"- комн.",value:t.rooms,handleChange:d}),(0,a.jsx)(r.Z,{name:"price",label:"Цена",param:"тг",value:t.price,handleChange:d}),(0,a.jsx)("input",{type:"submit",className:"submit-btn",value:"Найти"})]})})})})};t(7652);var d=t(4033),m=t(8758);t(201);var h=t(1415),p=t(7617),g=t(73),v=t(891),x=()=>{let[e,s]=(0,n.useState)(null),[t,i]=(0,n.useState)([]),[l,r]=(0,n.useState)(1),[o,u]=(0,n.useState)(!0),[d,m]=(0,n.useState)(1),h=async()=>{let{data:e}=await c.Z.get("/api/advertisements",{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});s(e)},x=async()=>{u(!0);let{data:e}=await c.Z.get("/api/posts?size=sm&page=".concat(l),{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}}),s=e.posts;m(e.totalPages),i(e=>[...e,...s]),u(!1)};(0,n.useEffect)(()=>{e||h()},[e]),(0,n.useEffect)(()=>{x()},[l]);let j=()=>{window.innerHeight+document.documentElement.scrollTop!==document.documentElement.offsetHeight||o||r(e=>e+1)};return(0,n.useEffect)(()=>(l<d&&window.addEventListener("scroll",j),()=>{window.removeEventListener("scroll",j)}),[o]),(0,a.jsxs)("div",{className:"mobileposts",children:[t.map((s,t)=>(0,a.jsxs)("div",{className:"col",children:[(0,a.jsx)(v.Z,{post:s}),Number(t+1)%5==0&&e&&e.length>0&&(0,a.jsx)(p.Z,{ad:e[(Number(t+1)/5-1)%e.length]})]},t)),o&&(0,a.jsx)(g.Z,{})]})},j=e=>{let{post:s}=e,t=(0,d.useRouter)();return(0,a.jsxs)("div",{className:"postsmall",onClick:e=>{e.preventDefault(),t.push("/posts/".concat(s._id))},children:[(0,a.jsxs)("div",{className:"postimage",children:[s.images&&s.images.length>0?(0,a.jsx)("img",{loading:"lazy",src:"https://cna.kz/public/uploads/".concat(s.images[0]),alt:""}):(0,a.jsx)("img",{loading:"lazy",src:"/noimage.png",alt:"noimage"}),(0,a.jsxs)("div",{className:"price",children:[(0,m.yN)(s.price)," 〒"]})]}),(0,a.jsx)("div",{className:"title",children:(0,m.i2)(s)})]})},f=t(5330),w=t.n(f),N=()=>{var e;let[s,t]=(0,n.useState)(null),[i,l]=(0,n.useState)(null),r=async()=>{let{data:e}=await c.Z.get("/api/posts?size=lg",{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});t(e);let{data:s}=await c.Z.get("/api/about",{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});l(s)};return(0,n.useEffect)(()=>{s||r()},[s]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"smallposts",children:[(0,a.jsxs)("div",{className:"apartments",children:[(0,a.jsx)("div",{className:"medium-24-28 text-black",children:"Квартиры"}),(0,a.jsx)("div",{className:"row",children:s&&s.apartments?s.apartments.map((e,s)=>(0,a.jsx)("div",{className:"col",children:(0,a.jsx)(j,{post:e})},s)):(0,a.jsx)(g.Z,{})})]}),(0,a.jsxs)("div",{className:"houses",children:[(0,a.jsx)("div",{className:"medium-24-28 text-black",children:"Дома"}),(0,a.jsx)("div",{className:"row",children:s&&s.houses?s.houses.map((e,s)=>(0,a.jsx)("div",{className:"col",children:(0,a.jsx)(j,{post:e})},s)):(0,a.jsx)(g.Z,{})})]}),(0,a.jsxs)("div",{className:"commercials",children:[(0,a.jsx)("div",{className:"medium-24-28 text-black",children:"Коммерческие недвижимости"}),(0,a.jsx)("div",{className:"row",children:s&&s.commercials?s.commercials.map((e,s)=>(0,a.jsx)("div",{className:"col",children:(0,a.jsx)(j,{post:e})},s)):(0,a.jsx)(g.Z,{})})]})]}),i&&(0,a.jsxs)("div",{id:"about",children:[(0,a.jsx)("div",{className:"medium-24-28 text-black",children:"О нас"}),(0,a.jsx)("div",{className:"regular-16-20 text-black",dangerouslySetInnerHTML:{__html:w()(null===(e=JSON)||void 0===e?void 0:e.parse(i))}})]})]})},b=()=>{let[e,s]=function(){let[e,s]=(0,n.useState)([0,0]);return(0,n.useLayoutEffect)(()=>{function e(){s([window.innerWidth,window.innerHeight])}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),e}(),[t,i]=(0,n.useState)("sm"),l=(0,d.useRouter)();(0,n.useEffect)(()=>{e&&(e<992?"lg"===t&&i("sm"):"sm"===t&&i("lg"))},[e]);let r=async e=>{let s="";switch(e.housing){case"Дом":s="house";break;case"Коммерческую недвижимость":s="commercial";break;default:s="apartment"}let t=e.operation?e.operation:"Купить",a=(0,m.rW)({...e,housing:s,operation:null});"Купить"===t?l.push("/posts".concat(a)):l.push("/rent".concat(a))};return(0,a.jsxs)("div",{id:"home",children:[(0,a.jsx)(h.Z,{}),(0,a.jsx)(u,{handleSubmit:r}),(0,a.jsxs)("div",{className:"container",children:[(0,a.jsx)("div",{className:"medium-24-28 text-black",children:"Последние предложения недвижимости"}),"lg"===t&&(0,a.jsx)(N,{}),"sm"===t&&(0,a.jsx)(x,{})]})]})}},2003:function(e,s,t){"use strict";var a=t(7437);s.Z=e=>{let{name:s="",placeholder:t="",label:n="",value:i="",handleChange:l}=e;return(0,a.jsxs)("div",{className:"input text-input",children:[n&&(0,a.jsx)("label",{children:n}),(0,a.jsx)("input",{type:"text",name:s,placeholder:t,value:i,onChange:e=>{e.preventDefault(),l(e.currentTarget.name,e.currentTarget.value)}})]})}}},function(e){e.O(0,[750,685,330,482,971,596,744],function(){return e(e.s=3283)}),_N_E=e.O()}]);