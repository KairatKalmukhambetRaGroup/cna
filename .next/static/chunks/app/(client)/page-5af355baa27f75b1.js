(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[766],{3283:function(e,s,a){Promise.resolve().then(a.bind(a,6990))},6990:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return N}});var t=a(7437),n=a(2265);a(3556);var i=a(3950),l=a(3428),c=a(5794),r=a(9222);let o={housing:"Квартиру",rooms:[],city:"",region:"",price:{from:"",to:""}};var d=e=>{let{handleSubmit:s}=e,[a,d]=n.useState(o),u=(e,s)=>{if(d({...a,[e]:s}),"city"===e&&a.city!==s)for(let e=0;e<x.length;e++){let a=x[e];a.name===s&&h(a.regions.map(e=>e.short))}"housing"===e&&"Коммерческую недвижимость"===s&&d({...a,rooms:[],housing:s})},[m,h]=(0,n.useState)(null),[p,v]=(0,n.useState)(null),[x,j]=(0,n.useState)(null),g=async()=>{let{data:e}=await r.Z.get("/api/cities",{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});j(e),v(e.map(e=>e.name))};return(0,n.useEffect)(()=>{p?(d({...a,city:p[0]}),h(x[0].regions.map(e=>e.short))):g()},[p]),(0,t.jsx)("div",{id:"filter",className:"simple",children:(0,t.jsx)("div",{className:"container",children:(0,t.jsx)("div",{className:"content",children:(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s(a)},children:[(0,t.jsx)("div",{className:"regular-14-16",children:"Купить"}),(0,t.jsx)(i.Z,{mobile:!0,name:"housing",options:["Квартиру","Дом","Коммерческую недвижимость"],value:a.housing,handleChange:u}),(0,t.jsx)(i.Z,{mobile:!0,name:"city",options:p,value:a.city,handleChange:u}),m&&m.length>0&&(0,t.jsx)(i.Z,{name:"region",placeholder:"Не важно",options:m,value:a.region,handleChange:u}),"Коммерческую недвижимость"!==a.housing&&(0,t.jsx)(l.Z,{name:"rooms",label:"- комн.",value:a.rooms,handleChange:u}),(0,t.jsx)(c.Z,{name:"price",label:"Цена",param:"тг",value:a.price,handleChange:u}),(0,t.jsx)("input",{type:"submit",className:"submit-btn",value:"Найти"})]})})})})};a(7652),a(201);var u=a(8758),m=a(4033),h=e=>{let{post:s}=e,a=(0,m.useRouter)();return(0,t.jsxs)("div",{className:"postsmall",onClick:e=>{e.preventDefault(),a.push("/posts/".concat(s._id))},children:[(0,t.jsxs)("div",{className:"postimage",children:[s.images&&s.images.length>0?(0,t.jsx)("img",{loading:"lazy",src:"https://cna.kz/public/uploads/".concat(s.images[0]),alt:""}):(0,t.jsx)("img",{loading:"lazy",src:"/noimage.png",alt:"noimage"}),(0,t.jsxs)("div",{className:"price",children:[(0,u.yN)(s.price)," 〒"]})]}),(0,t.jsx)("div",{className:"title",children:(0,u.i2)(s)})]})},p=a(73),v=a(891),x=a(5330),j=a.n(x);a(5423);var g=a(7617),f=a(1415),N=()=>{var e;let[s,a]=function(){let[e,s]=(0,n.useState)([0,0]);return(0,n.useLayoutEffect)(()=>{function e(){s([window.innerWidth,window.innerHeight])}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),e}(),[i,l]=(0,n.useState)("sm"),[c,o]=(0,n.useState)(null),x=(0,m.useRouter)(),[N,b]=(0,n.useState)(null),[y,w]=(0,n.useState)(null),A=async()=>{let{data:e}=await r.Z.get("/api/posts?size=".concat(i),{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});b(e);let{data:s}=await r.Z.get("/api/about",{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});w(s)};(0,n.useEffect)(()=>{N||A(),c||C()},[N]);let C=async()=>{let{data:e}=await r.Z.get("/api/advertisements",{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});o(e)};(0,n.useEffect)(()=>{s&&(s<992?"lg"===i&&l("sm"):"sm"===i&&l("lg"))},[s]),(0,n.useEffect)(()=>{i&&A()},[i]);let k=async e=>{let s="";switch(e.housing){case"Дом":s="house";break;case"Коммерческую недвижимость":s="commercial";break;default:s="apartment"}let a=(0,u.rW)({...e,housing:s});x.push("/posts".concat(a))};return(0,t.jsxs)("div",{id:"home",children:[(0,t.jsx)(f.Z,{}),(0,t.jsx)(d,{handleSubmit:k}),(0,t.jsxs)("div",{className:"container",children:[(0,t.jsx)("div",{className:"medium-24-28 text-black",children:"Последние предложения недвижимости"}),"lg"===i&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"smallposts",children:[(0,t.jsxs)("div",{className:"apartments",children:[(0,t.jsx)("div",{className:"medium-24-28 text-black",children:"Квартиры"}),(0,t.jsx)("div",{className:"row",children:N&&N.apartments?N.apartments.map((e,s)=>(0,t.jsx)("div",{className:"col",children:(0,t.jsx)(h,{post:e})},s)):(0,t.jsx)(p.Z,{})})]}),(0,t.jsxs)("div",{className:"houses",children:[(0,t.jsx)("div",{className:"medium-24-28 text-black",children:"Дома"}),(0,t.jsx)("div",{className:"row",children:N&&N.houses?N.houses.map((e,s)=>(0,t.jsx)("div",{className:"col",children:(0,t.jsx)(h,{post:e})},s)):(0,t.jsx)(p.Z,{})})]}),(0,t.jsxs)("div",{className:"commercials",children:[(0,t.jsx)("div",{className:"medium-24-28 text-black",children:"Коммерческие недвижимости"}),(0,t.jsx)("div",{className:"row",children:N&&N.commercials?N.commercials.map((e,s)=>(0,t.jsx)("div",{className:"col",children:(0,t.jsx)(h,{post:e})},s)):(0,t.jsx)(p.Z,{})})]})]}),y&&(0,t.jsxs)("div",{id:"about",children:[(0,t.jsx)("div",{className:"medium-24-28 text-black",children:"О нас"}),(0,t.jsx)("div",{className:"regular-16-20 text-black",dangerouslySetInnerHTML:{__html:j()(null===(e=JSON)||void 0===e?void 0:e.parse(y))}})]})]}),"sm"===i&&(0,t.jsx)("div",{className:"mobileposts",children:N&&N.length>0?N.map((e,s)=>(0,t.jsxs)("div",{className:"col",children:[(0,t.jsx)(v.Z,{post:e}),Number(s+1)%5==0&&c&&c.length>0&&(0,t.jsx)(g.Z,{ad:c[(Number(s+1)/5-1)%c.length]})]},s)):(0,t.jsx)(p.Z,{})})]})]})}},7617:function(e,s,a){"use strict";var t=a(7437);a(4741),s.Z=e=>{let{ad:s}=e;return(0,t.jsxs)("a",{className:"advertcard",href:s.link,children:[(0,t.jsx)("div",{className:"adimage",children:s.image?(0,t.jsx)("img",{loading:"lazy",src:"https://cna.kz/public/uploads/".concat(s.image),alt:"preview"}):(0,t.jsx)("img",{loading:"lazy",src:"/noimage.png",alt:"noimage"})}),(0,t.jsxs)("div",{className:"info",children:[(0,t.jsx)("div",{className:"title",children:s.name}),s.description&&(0,t.jsx)("div",{className:"description",children:s.description}),(0,t.jsx)("div",{className:"tag",children:"Реклама"})]})]})}},3428:function(e,s,a){"use strict";var t=a(7437);a(5159),a(2265);let n=[1,2,3,4,5];s.Z=e=>{let{name:s="",label:a="",value:i=[],handleChange:l}=e,c=e=>{e.preventDefault();let a=e.currentTarget.dataset.value,t=[];Array.isArray(i)?t=[...i]:t.push(Number(i)),t.includes(Number(a))?t=t.filter(e=>Number(e)!==Number(a)):t.push(Number(a)),l(s,t)};return(0,t.jsxs)("div",{className:"input multinumber",children:[(0,t.jsx)("div",{className:"numbers",children:n.map((e,s)=>(0,t.jsx)("div",{className:"number ".concat(i.includes(Number(e))?"active":""),"data-value":e,onClick:c,children:e},s))}),(0,t.jsx)("label",{children:a})]})}},5794:function(e,s,a){"use strict";var t=a(7437);s.Z=e=>{let{name:s="",label:a="",value:n,param:i,handleChange:l,labeled:c=!1}=e,r=e=>{if(e){var s=e.toString().split(".");s[0]=s[0].replace(/\B(?=(\d{3})+(?!\d))/g," "),e=s.join(".")}return e},o=e=>{e.preventDefault();let a=e.currentTarget.dataset.pref,t=e.currentTarget.value.replace(/\s+/g,""),i="";for(let e=0;e<t.length;e++){let s=t[e];i+=s}l(s,{...n,[a]:i})};return(0,t.jsxs)("div",{className:"input number-range ".concat(c?"labeled":""),children:[a&&(0,t.jsx)("label",{children:a}),(0,t.jsx)("input",{type:"text",name:"".concat(s,"1"),"data-pref":"from",placeholder:"от",value:r(n.from),onChange:o}),(0,t.jsx)("div",{className:"hl"}),(0,t.jsx)("input",{type:"text",name:"".concat(s,"2"),"data-pref":"to",placeholder:"до",value:r(n.to),onChange:o}),i&&(0,t.jsx)("label",{className:"last",children:"м2"===i?(0,t.jsxs)(t.Fragment,{children:["м",(0,t.jsx)("sup",{children:"2"})]}):i})]})}},3950:function(e,s,a){"use strict";var t=a(7437),n=a(2265);a(5159),s.Z=e=>{let{mobile:s=!1,name:a="",placeholder:i=null,label:l="",value:c="",options:r=[],handleChange:o,labeled:d=!1}=e,[u,m]=n.useState(!1),h=e=>{e.preventDefault();let s=e.currentTarget.dataset.value;o(a,s),m(!1)};return(0,t.jsxs)("div",{className:"input select ".concat(d?"labeled":""," ").concat(s?"mobile":""),children:[(0,t.jsx)("label",{children:l}),(0,t.jsxs)("div",{className:"select",children:[(0,t.jsxs)("div",{className:"selected",onClick:e=>{m(!u)},children:[(0,t.jsx)("span",{className:"val",children:c||i}),(0,t.jsx)("i",{})]}),(0,t.jsxs)("div",{className:"options ".concat(u?"active":""),children:[i&&(0,t.jsx)("div",{className:"option ".concat(""===c?"active":""),"data-value":null,onClick:h,children:i}),r&&r.length>0&&r.map((e,s)=>(0,t.jsx)("div",{className:"option ".concat(e===c?"active":""),"data-value":e,onClick:h,children:e},s))]})]})]})}},73:function(e,s,a){"use strict";var t=a(7437);a(3733),s.Z=e=>{let{small:s=!1}=e;return(0,t.jsx)("div",{className:"loading ".concat(s?"small":""),children:(0,t.jsxs)("div",{className:"lds-roller",children:[(0,t.jsx)("div",{}),(0,t.jsx)("div",{}),(0,t.jsx)("div",{}),(0,t.jsx)("div",{}),(0,t.jsx)("div",{}),(0,t.jsx)("div",{}),(0,t.jsx)("div",{}),(0,t.jsx)("div",{})]})})}},1415:function(e,s,a){"use strict";var t=a(7437),n=a(1396),i=a.n(n);a(3698),s.Z=()=>(0,t.jsxs)("div",{id:"menu",children:[(0,t.jsxs)(i(),{href:"/",className:"menu-item",children:[(0,t.jsx)("i",{className:"home"}),"Главная"]}),(0,t.jsxs)("a",{href:"tel:+77055621546",className:"menu-item new",children:[(0,t.jsx)("i",{className:"new"}),"Подать"]}),(0,t.jsxs)(i(),{href:"/about",className:"menu-item",children:[(0,t.jsx)("i",{className:"about"}),"О нас"]})]})},891:function(e,s,a){"use strict";var t=a(7437),n=a(8758),i=a(5330),l=a.n(i),c=a(4033);s.Z=e=>{var s;let{post:a}=e,i=(0,c.useRouter)();return(0,t.jsxs)("div",{className:"postcard",onClick:e=>{e.preventDefault(),i.push("/posts/".concat(a._id))},children:[(0,t.jsx)("div",{className:"postimage",children:a.images&&a.images.length>0?(0,t.jsx)("img",{loading:"lazy",src:"https://cna.kz/public/uploads/".concat(a.images[0]),alt:"preview"}):(0,t.jsx)("img",{loading:"lazy",src:"/noimage.png",alt:"noimage"})}),(0,t.jsxs)("div",{className:"info",children:[(0,t.jsxs)("div",{className:"top",children:[(0,t.jsx)("div",{className:"title",children:(0,n.i2)(a)}),(0,t.jsxs)("div",{className:"price",children:[(0,n.eS)(a.price)," 〒"]})]}),(0,t.jsxs)("div",{className:"addres",children:[a.region.name,", ",a.adress]}),a.description&&(0,t.jsx)("div",{className:"description",dangerouslySetInnerHTML:{__html:l()(null===(s=JSON)||void 0===s?void 0:s.parse(null==a?void 0:a.description))}}),(0,t.jsxs)("div",{className:"date",children:[(0,t.jsx)("span",{children:a.city.name}),(0,n.ce)(a.createdAt)]})]})]})}},8758:function(e,s,a){"use strict";a.d(s,{ce:function(){return n},eS:function(){return l},i2:function(){return o},pQ:function(){return r},rW:function(){return c},yN:function(){return i}});let t=["янв.","февр.","март","апр.","май","июнь","июль","авг.","сент.","окт.","нояб.","дек."],n=e=>{let s=new Date().getFullYear(),a=new Date(e),n=a.getDate(),i=a.getMonth(),l=a.getFullYear();return l===s?n+" "+t[i]:n+" "+t[i]+" "+l},i=e=>e>1e6?Math.round(e/1e5)/10+" млн.":e,l=e=>{if(e){var s=e.toString().split(".");s[0]=s[0].replace(/\B(?=(\d{3})+(?!\d))/g," "),e=s.join(".")}return e},c=e=>{let s="?";for(let a in e)if(Object.hasOwnProperty.call(e,a)){let t=e[a];t&&a&&("object"==typeof t?Array.isArray(t)?t.forEach(e=>{s.length>1&&(s+="&"),s+=a+"="+e}):(t.from&&(s.length>1&&(s+="&"),s+=a+"_from="+t.from),t.to&&(s.length>1&&(s+="&"),s+=a+"_to="+t.to)):(s.length>1&&(s+="&"),s+=a+"="+t))}return s},r=e=>{let s=decodeURI(e).replace(/\+/g," ").split("&"),a={};return s.forEach(e=>{let s=e.split("=");if(s[0].includes("_")){let e=s[0].split("_");a[e[0]]||(a[e[0]]={}),a[e[0]][e[1]]=s[1]}else if(a[s[0]]){if(!Array.isArray(a[s[0]])){let e=isNaN(a[s[0]])?a[s[0]]:Number(a[s[0]]);a[s[0]]=[],a[s[0]].push(e)}a[s[0]].push(isNaN(s[1])?s[1]:Number(s[1]))}else a[s[0]]=s[1]}),a},o=e=>{let s="";switch(e.housing.slug){case"apartment":s+="".concat(e.rooms,"-комнатная квартира"),e.area&&e.area.total&&(s+=", ".concat(e.area.total," м\xb2")),e.floor&&(s+=", ".concat(e.floor),e.floors&&(s+="/".concat(e.floors)),s+=" этаж");break;case"house":s+="".concat(e.rooms,"-комнатый дом"),e.area&&e.area.total&&(s+=", ".concat(e.area.total," м\xb2")),e.plot&&(s+=", ".concat(e.plot," сот."));break;case"commercial":s+="".concat(e.commercial.purpose),e.area&&e.area.total&&(s+=" - ".concat(e.area.total," м\xb2"))}return s}},4741:function(){},3556:function(){},7652:function(){},5159:function(){},3733:function(){},3698:function(){},201:function(){},4033:function(e,s,a){e.exports=a(8165)}},function(e){e.O(0,[750,685,330,718,530,971,596,744],function(){return e(e.s=3283)}),_N_E=e.O()}]);