(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[289],{7885:function(e,t,s){Promise.resolve().then(s.bind(s,3563))},3563:function(e,t,s){"use strict";s.r(t);var o=s(7437),a=s(6578),n=s(1415),r=s(1463),i=s(7358),l=s(1206);s(7652);var c=s(8758),u=s(9222),f=s(4033),h=s(2265);let p={housing:"apartments",rooms:[],purpose:[],placement:[],city:"",region:"",price:{from:"",to:""},material:[],year:{from:"",to:""},floor:{from:"",to:""},floors:{from:"",to:""},plot:{from:"",to:""},heating:[],sewerage:[],bathroom:[],total_area:{from:"",to:""},kitchen_area:{from:"",to:""},living_area:{from:"",to:""},sort:"new"};t.default=()=>{let e=(0,f.useRouter)(),t=(0,f.useSearchParams)(),[s,g]=(0,h.useState)(p),[m,d]=(0,h.useState)(),[S,w]=(0,h.useState)(),[v,x]=(0,h.useState)(null),[y,A]=(0,h.useState)(1),[C,j]=(0,h.useState)(1),[_,b]=(0,h.useState)(!0),[E,W]=(0,h.useState)(0),[Z,N]=(0,h.useState)(""),O=(t,o)=>{if(g({...s,[t]:o}),"city"===t&&s.city!==o){o||d([]);for(let e=0;e<v.length;e++){let t=v[e];t.name===o&&d(t.regions.map(e=>e.short))}}if("housing"===t){g({...p,[t]:o});let s=(0,c.rW)({[t]:o});e.push("".concat(s)),N(s)}else if("sort"===t){let a=(0,c.rW)({...s,[t]:o});e.push("".concat(a)),N(a)}},[k,P]=(0,h.useState)([]),T=async()=>{P(null),window.scrollTo({top:300,behavior:"smooth"});let{data:e}=await u.Z.get("/api/posts/sell".concat(Z.includes("?")?Z:"?"+Z),{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}}),t=e.posts;A(e.totalPages),W(e.count),P(t),window.scrollTo({top:300,behavior:"smooth"})},D=async()=>{let{data:e}=await u.Z.get("/api/cities",{validateStatus:function(e){return!0},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});x(e),w(e.map(e=>e.name))};return(0,h.useEffect)(()=>{if(Z){let t=(0,c.pQ)(Z),s=(0,c.rW)({...t,page:C});e.push("".concat(s))}},[C]),(0,h.useEffect)(()=>{P([]),b(!0),T()},[Z]),(0,h.useEffect)(()=>{if(S){if(s.city)for(let e=0;e<v.length;e++){let t=v[e];t.name===s.city&&d(t.regions.map(e=>e.short))}}else D()},[S]),(0,h.useEffect)(()=>{let o=t.toString(),a=(0,c.pQ)(o);if(a.page&&j(a.page),a.housing)g({...s,...a}),N(o);else{a.housing="apartment";let t=(0,c.rW)(a);e.push("".concat(t))}},[t]),(0,o.jsxs)("div",{id:"allposts",children:[(0,o.jsx)(n.Z,{}),(0,o.jsx)(a.Z,{prefix:"Покупка",housing:s.housing,cities:S,regions:m,formData:s,handleChange:O,handleSubmit:t=>{t.preventDefault();let o=(0,c.rW)({...s,page:1});e.push("".concat(o))}}),(0,o.jsx)("div",{className:"container",children:(0,o.jsxs)("div",{className:"content",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)(i.Z,{prefix:"Продажа",posts:k,loading:_,title:s.housing,formData:s,handleChange:O,total:E}),(0,o.jsx)(r.Z,{page:Number(C),setPage:j,totalPages:y})]}),(0,o.jsx)(l.Z,{})]})})]})}}},function(e){e.O(0,[750,396,330,910,247,971,596,744],function(){return e(e.s=7885)}),_N_E=e.O()}]);